(function(e){function t(t){for(var o,r,s=t[0],i=t[1],l=t[2],d=0,m=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&m.push(c[r][0]),c[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var i=a[s];0!==c[i]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},c={app:0},n=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://umk.coko38.ru/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"025b":function(e,t,a){"use strict";a("72bc")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),c=a("31bd"),n=a("2909"),r=(a("c740"),a("a434"),a("2f62")),s=a("5935");o["a"].use(r["a"]);var i=new r["a"].Store({strict:!0,state:{user:null,token:null,isSignin:!1,isSubjectsSidebar:!1,isAreasSidebar:!1,publishers:[],subjects:[],areas:[],levels:[],emcs:[],emcsOnSchool:[]},mutations:{updateField:s["c"],setToken:function(e,t){e.token=t,e.isSignin=!!t},setUser:function(e,t){e.user=t},setSubjectsSidebar:function(e,t){e.isSubjectsSidebar=t},setAreasSidebar:function(e,t){e.isAreasSidebar=t},setPublishers:function(e,t){e.publishers=t},setSubjects:function(e,t){e.subjects=t},setAreas:function(e,t){e.areas=t},setLevels:function(e,t){e.levels=t},setEMCs:function(e,t){e.emcs=t,e.emcs=Object(n["a"])(e.emcs)},updateEMC:function(e,t){var a=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==a&&(console.log("before mutate: ",e.emcs[a]),e.emcs.splice(a,0,t),console.log("after mutate: ",e.emcs[a])),e.emcs=Object(n["a"])(e.emcs)},createEMC:function(e,t){t.publisherId=t.Publisher.id,t.levelId=t.Level.id,t.subjectId=t.Subject.id,console.log("mutating emc ",t),e.emcs.push(t),e.emcs=Object(n["a"])(e.emcs)},deleteEMC:function(e,t){var a=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==a&&e.emcs.splice(a,1),e.emcs=Object(n["a"])(e.emcs)},updateEMCOnSchoolApproval:function(e,t){var a=e.emcsOnSchool.findIndex((function(e){return e.id===t.id}));console.log("index emcOnSchoolToChange in store: ",e.emcsOnSchool.findIndex((function(e){return e.id===t.id}))),console.log("emcOnSchool ",t),-1!==a&&(e.emcsOnSchool[a].isApproved=!e.emcsOnSchool[a].isApproved),console.log("state.emcsOnSchool: ",e.emcsOnSchool),e.emcsOnSchool=Object(n["a"])(e.emcsOnSchool)},swapCreatingStatus:function(e,t){var a=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==a&&null===!e.emcs[a].createdBy&&(e.emcs[a].isCustom=!e.emcs[a].isCustom),e.emcs=Object(n["a"])(e.emcs)}},actions:{setToken:function(e,t){var a=e.commit;a("setToken",t)},setUser:function(e,t){var a=e.commit;a("setUser",t)},setSubjectsSidebar:function(e,t){var a=e.commit;a("setSubjectsSidebar",t)},setAreasSidebar:function(e,t){var a=e.commit;a("setAreasSidebar",t)},setPublishers:function(e,t){var a=e.commit;a("setPublishers",t)},setSubjects:function(e,t){var a=e.commit;a("setSubjects",t)},setAreas:function(e,t){var a=e.commit;a("setAreas",t)},setLevels:function(e,t){var a=e.commit;a("setLevels",t)},setEMCs:function(e,t){var a=e.commit;a("setEMCs",t)},updateEMCOnSchoolApproval:function(e,t){var a=e.commit;a("updateEMCOnSchoolApproval",t)},updateEMCOnSchool:function(e,t){var a=e.commit;a("updateEMCOnSchool",t)},updateEMC:function(e,t){var a=e.commit;console.log("commiting updateEMC"),a("updateEMC",t)},createEMC:function(e,t){var a=e.commit;console.log("commiting createEMC ",t),a("createEMC",t)},deleteEMC:function(e,t){var a=e.commit;a("deleteEMC",t)},swapCreatingStatusEMC:function(e,t){var a=e.commit;a("swapCreatingStatus",t)}},getters:{getField:s["a"]}}),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("PageHeader"),e.isAreasSidebar&&e.isSignin?a("TheSidebar",e._l(e.areas,(function(t){return a("v-list-group",{key:t.AreaID,attrs:{value:!1,"prepend-icon":"mdi-account-circle"},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",[e._v(e._s(t.name))])]},proxy:!0}],null,!0)},e._l(t.Schools,(function(o){return a("v-list-group",{key:o.id,attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{attrs:{blue:""}},[e._v(e._s(o.code)+" "+e._s(o.name)+" ")])],1)]},proxy:!0}],null,!0)},e._l(e.subjects,(function(c){return a("v-list-item",{key:c.SubjectGlobalID,attrs:{value:!1,link:""}},[a("v-list-item-content",[1==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"admin-emcs-on-school",params:{areaCode:t.code,schoolCode:o.code,subjectCode:c.code}}}},[e._v(" "+e._s(c.name)+" ")]):e._e(),2==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs-on-school",params:{areaCode:t.code,schoolCode:o.code,subjectCode:c.code}}}},[e._v(" "+e._s(c.name)+" ")]):e._e(),3==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"poo-emcs-on-school",params:{areaCode:t.code,schoolCode:o.code,subjectCode:c.code}}}},[e._v(" "+e._s(c.name)+" ")]):e._e()],1)],1)})),1)})),1)})),1):e._e(),e.isSubjectsSidebar&&e.isSignin?a("TheSidebar",e._l(e.subjects,(function(t){return a("v-list-item",{key:t.SubjectGlobalID,attrs:{value:!1,link:""}},[a("v-list-item-content",[1==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"admin-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),2==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"pmo-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),3==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"poo-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)],1)})),1):e._e(),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1),a("TheFooter")],1)},u=[],d=a("5530"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app-bar",{attrs:{app:"","clipped-left":""}},[o("div",{staticClass:"d-flex align-center"},[o("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:a("cf05"),transition:"scale-transition",width:"40"}})],1),e.isSignin?e._e():o("v-btn",{attrs:{plain:"",to:{name:"/"}}},[e._v(" Система учёта УМК ")]),e.isSignin?o("div",[o("v-btn",{attrs:{plain:"",to:{path:"/"+e.user.UserRole.name}}},[e._v(" Система учёта УМК ")]),1==e.user.UserRole.code?o("v-btn",{attrs:{plain:"",to:{name:"admin-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),1==e.user.UserRole.code?o("v-btn",{attrs:{plain:"",to:{name:"admin-emcs"}}},[e._v(" Конструктор ")]):e._e(),2==e.user.UserRole.code?o("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),2==e.user.UserRole.code?o("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs"}}},[e._v(" Конструктор ")]):e._e(),3==e.user.UserRole.code?o("v-btn",{attrs:{plain:"",to:{name:"poo-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),3==e.user.UserRole.code?o("v-btn",{attrs:{plain:"",to:{name:"poo-emcs"}}},[e._v(" Конструктор ")]):e._e()],1):e._e(),o("v-spacer"),e.isSignin?o("v-btn",{attrs:{plain:"",to:{path:"/"+e.user.UserRole.name}}},[e._v(" "+e._s(e.user.username))]):e._e(),e.isSignin?o("v-btn",{attrs:{plain:""},on:{click:e.signout}},[e._v(" Выход ")]):e._e(),e.isSignin?e._e():o("v-btn",{attrs:{plain:"",to:{name:"/"}}},[e._v(" Войти ")])],1)},v=[],p={computed:Object(d["a"])({},Object(r["b"])(["isSignin","user"])),methods:{signout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"/"})}}},h=p,b=a("2877"),C=a("6544"),f=a.n(C),g=a("40dc"),x=a("8336"),S=a("adda"),_=a("2fa4"),O=Object(b["a"])(h,m,v,!1,null,null,null),j=O.exports;f()(O,{VAppBar:g["a"],VBtn:x["a"],VImg:S["a"],VSpacer:_["a"]});var w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{app:"",width:"20%",left:"true",permanent:"",absolute:"",clipped:""}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-icon",[a("v-icon",[e._v("mdi-home")])],1),a("v-list-item-title",[e._v(" МО")]),a("v-list-item-subtitle",[e._v("Выберите оъект ")])],1)],1),a("v-divider"),e._t("default",(function(){return[e._v(" Нет данных ")]}))],2)},E=[],M={},k=M,$=a("ce7e"),V=a("132d"),D=a("da13"),R=a("5d23"),F=a("34c3"),y=a("f774"),A=Object(b["a"])(k,w,E,!1,null,"9931fdc2",null),T=A.exports;f()(A,{VDivider:$["a"],VIcon:V["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemIcon:F["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VNavigationDrawer:y["a"]});var L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{outlined:"",padless:""}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[e._l(e.links,(function(t){return a("v-btn",{key:t.link,staticClass:"my-2",attrs:{text:"",rounded:"",href:t.link,target:"_blank",link:""}},[a("v-icon",{attrs:{color:"blue",size:"24px"}},[e._v(" "+e._s(t.icon)+" ")])],1)})),a("v-col",{staticClass:"py-4 text-center",attrs:{cols:"12"}},[e._v(" ГАУ ИО ЦОПМКиМКО © "+e._s((new Date).getFullYear())+" ")])],2)],1)},I=[],P={data:function(){return{links:[{name:"Наш сайт",link:"https://coko38.ru",icon:"mdi-home-circle"},{name:"ВКонтакте",link:"https://vk.com/public196012235",icon:"mdi-vk"},{name:"Facebook",link:"https://www.facebook.com/groups/249765916319275/",icon:"mdi-facebook"},{name:"Instagram",link:"https://www.instagram.com/copmkimko/?hl=ru",icon:"mdi-instagram"}]}}},U=P,z=a("62ad"),B=a("553a"),N=a("0fd9"),G=Object(b["a"])(U,L,I,!1,null,null,null),q=G.exports;f()(G,{VBtn:x["a"],VCol:z["a"],VFooter:B["a"],VIcon:V["a"],VRow:N["a"]});var H={name:"App",components:{PageHeader:j,TheSidebar:T,TheFooter:q},data:function(){return{err:null}},computed:Object(d["a"])({},Object(r["b"])(["isSignin","user","isSubjectsSidebar","isAreasSidebar","subjects","areas"]))},J=H,Y=a("7496"),K=a("a523"),Q=a("56b0"),W=a("f6c4"),X=Object(b["a"])(J,l,u,!1,null,null,null),Z=X.exports;f()(X,{VApp:Y["a"],VBtn:x["a"],VContainer:K["a"],VListGroup:Q["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemTitle:R["c"],VMain:W["a"]});var ee=a("8c4f"),te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"d-flex justify-center"},[a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"3"}},[a("v-form",[a("v-text-field",{attrs:{type:"username",name:"username",autocomplete:"off",maxlength:"20"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{autocomplete:"off",type:"password",name:"input-10-1",label:"Normal with hint text",hint:"At least 8 characters"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{on:{click:e.signup}},[e._v(" Зарегистрироваться ")])],1)],1)],1)},ae=[],oe=a("1da1"),ce=(a("96cf"),a("bc3a")),ne=a.n(ce),re=function(){return ne.a.create({headers:{Authorization:"Bearer ".concat(i.state.token)}})},se={signup:function(e){return re().post("signup",e)},signin:function(e){return re().post("signin",e)}},ie={data:function(){return{username:"Введите логин",password:"Пароль"}},methods:{signup:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,se.signup({username:e.username,password:e.password});case 2:case"end":return t.stop()}}),t)})))()}}},le=ie,ue=a("4bd4"),de=a("8654"),me=Object(b["a"])(le,te,ae,!1,null,"1f71653f",null),ve=me.exports;f()(me,{VBtn:x["a"],VCol:z["a"],VForm:ue["a"],VRow:N["a"],VTextField:de["a"]});var pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"d-flex justify-center"},[a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"3"}},[a("v-form",[a("v-text-field",{attrs:{type:"username",name:"username",maxlength:"20",placeholder:"Введите логин",require:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{type:"password",name:"input-10-1",label:"Введите пароль",placeholder:"Введите пароль",hint:"Как минимум 8 символов",require:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{on:{click:e.signin}},[e._v(" Войти ")])],1)],1)],1)},he=[],be={data:function(){return{username:"",password:"",error:null}},methods:{signin:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.signin({username:e.username,password:e.password});case 3:a=t.sent,console.log(a),e.$store.dispatch("setToken",a.data.token),e.$store.dispatch("setUser",a.data.user),1===e.$store.state.user.UserRole.code?e.$router.push("/admin"):2===e.$store.state.user.UserRole.code?e.$router.push("/pmo"):3===e.$store.state.user.UserRole.code&&e.$router.push("/poo"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},Ce=be,fe=Object(b["a"])(Ce,pe,he,!1,null,"28fd1177",null),ge=fe.exports;f()(fe,{VBtn:x["a"],VCol:z["a"],VForm:ue["a"],VRow:N["a"],VTextField:de["a"]});var xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center align-center"},[e._v("Страница не найдена")])},Se=[],_e={},Oe=_e,je=Object(b["a"])(Oe,xe,Se,!1,null,null,null),we=je.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-row",[a("v-col",[e._v(" Admin ")])],1):e._e()},Me=[],ke=(a("99af"),{getUserData:function(){return re().get("/admin")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().get("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().get("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return re().put("/admin/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().delete("/admin/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return console.log("EMCOnSchool:",Object(d["a"])({},e)),re().put("/admin/emcOnSchool/".concat(e.id),Object(d["a"])({},e))},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().post("/admin/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return re().post("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"),a)},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return re().delete("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}}),$e={computed:Object(d["a"])({},Object(r["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getUserData();case 3:a=t.sent,e.$store.dispatch("setAreas",a.data.areasAndSchools),e.$store.dispatch("setSubjects",a.data.subjects),e.$store.dispatch("setPublishers",a.data.publishers),e.$store.dispatch("setLevels",a.data.levels),e.$store.dispatch("setEMCs",a.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},Ve=$e,De=Object(b["a"])(Ve,Ee,Me,!1,null,"3e0d7443",null),Re=De.exports;f()(De,{VCol:z["a"],VRow:N["a"]});var Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?a("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsOnSchool,(function(t){return a("v-row",{key:t.id},[a("EMCOnSchoolCard",{attrs:{"emc-on-school":t},on:{onDetachEMCFrom:e.detachEMCFrom,onSwapApprovingStatusEMCOnSchool:e.swapApprovingStatusEMCOnSchool}})],1)})),1)],1):e._e()},ye=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(e.emcOnSchool.EMC.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Подтверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:!e.emcOnSchool.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не подтверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.EMC.isCustom,expression:"emcOnSchool.EMC.isCustom"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Пользовательский ")])],1),a("p",[a("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(e.emcOnSchool.EMC.Publisher.publisherName))]),a("p",[a("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(e.emcOnSchool.EMC.authors))]),a("p",[e._v("Класс: "+e._s(e.emcOnSchool.EMC.grades))]),a("p",[e._v("ГИА-"+e._s(e.emcOnSchool.EMC.gia))]),a("p",[e._v("Уровень: "+e._s(e.emcOnSchool.EMC.Level?e.emcOnSchool.EMC.Level.name:"Нет данных"))])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onSwapApprovingStatusEMCOnSchool",e.emcOnSchool)}}},[e._v(" "+e._s(e.emcOnSchool.isApproved?"Отменить утверждение":"Утвердить")+" ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-edit",params:{emcId:e.emcOnSchool.emcId}}}},[e._v(" Редактировать ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК ")])],1),a("v-expand-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[a("v-card-text",{staticClass:"pb-0"},[a("p",[a("strong",[e._v("Причина исползования:")]),e._v(" "+e._s(e.emcOnSchool.usingCoz))]),a("p",[a("strong",[e._v("Причина изменений:")]),e._v(" "+e._s(e.emcOnSchool.correctionCoz))]),a("p",[a("strong",[e._v("Причина смены: ")]),e._v(" "+e._s(e.emcOnSchool.swapCoz))])])],1)],1)],1)],1)},Te=[],Le={props:{emcOnSchool:{type:Object,default:null}},data:function(){return{isDetailing:!1}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","emcs"]))},Ie=Le,Pe=(a("025b"),a("b0af")),Ue=a("99d9"),ze=a("cc20"),Be=a("0789"),Ne=Object(b["a"])(Ie,Ae,Te,!1,null,"6dea7cd2",null),Ge=Ne.exports;f()(Ne,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VChip:ze["a"],VContainer:K["a"],VExpandTransition:Be["a"]});var qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.emc.previewData["Название"]))]),a("v-list-item-subtitle",[a("p",[e._v(" Авторы: "+e._s(t.item.emc.previewData["Авторы"])+"; Издатель: "+e._s(t.item.emc.previewData["Издатель"])+"; Классы: "+e._s(t.item.emc.previewData["Классы"])+" ")])])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),a("v-expand-transition",[e.model?a("v-list",[e._l(e.fields,(function(t,o){return a("v-list-item",{key:o},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),a("v-list-item",[a("v-text-field",{attrs:{type:"number",label:"Количество учеников"},model:{value:e.additionalDataForEMCOnSchool.studentsCount,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"studentsCount",t)},expression:"additionalDataForEMCOnSchool.studentsCount"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины использования"},model:{value:e.additionalDataForEMCOnSchool.usingCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"usingCoz",t)},expression:"additionalDataForEMCOnSchool.usingCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины смены"},model:{value:e.additionalDataForEMCOnSchool.swapCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"swapCoz",t)},expression:"additionalDataForEMCOnSchool.swapCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Планируемая корректировка"},model:{value:e.additionalDataForEMCOnSchool.correctionCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"correctionCoz",t)},expression:"additionalDataForEMCOnSchool.correctionCoz"}})],1)],2):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)},He=[],Je=(a("d81d"),a("b64b"),a("4de4"),a("b0c0"),a("fb6a"),{data:function(){return{model:null,additionalDataForEMCOnSchool:{swapCoz:null,usingCoz:null,correctionCoz:null,studentsCount:0},descriptionLimit:200,error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(s["b"])(["emcs","emcsOnSchool","user"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,a){if(a&&a.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===a.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var o=a.title.concat(". ")+a.authors.concat(". ")+a.Publisher.name,c=o.length>e.descriptionLimit?o.slice(0,e.descriptionLimit).concat("..."):o,n=[];n.previewData={},n.previewData["Название"]=a.title,n.previewData["Авторы"]=a.authors,n.previewData["Издатель"]=a.Publisher.name,n.previewData["Предмет"]=a.Subject.name,n.previewData["Классы"]=a.grades,n.previewData["Уровень"]=a.gia,n.previewData["Пользовательская"]=a.isCustom?"Да":"Нет",n.entry=a,t.push({Description:c,emc:n})}return t}),[])}}),watch:{$route:function(){this.model=null,this.getEMCs()}},created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("get emcs"),t.next=4,ke.getEMCs(e.$route.params);case 4:a=t.sent,console.log("new emcs ",a.data.emcs),e.emcs=Object(n["a"])(a.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},attachEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.attachTo(e.$route.params,e.model.entry.id,Object(d["a"])({},e.additionalDataForEMCOnSchool));case 3:a=t.sent,console.log("get response: ",a.data.emcsOnSchool),e.emcsOnSchool=a.data.emcsOnSchool,e.model=null,e.getEMCs(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}}),Ye=Je,Ke=a("c6a6"),Qe=a("8860"),We=Object(b["a"])(Ye,qe,He,!1,null,null,null),Xe=We.exports;f()(We,{VAutocomplete:Ke["a"],VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VCol:z["a"],VExpandTransition:Be["a"],VIcon:V["a"],VList:Qe["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"],VSpacer:_["a"],VTextField:de["a"]});var Ze={components:{EMCOnSchoolCard:Ge,EMCOnSchoolSelector:Xe},data:function(){return{error:null}},computed:Object(d["a"])({},Object(s["b"])(["emcsOnSchool","isSignin","user","emcs"])),watch:{$route:function(){this.getEMCsOnSchool()}},created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},methods:{getEMCs:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("eos get emcs"),t.next=4,ke.getEMCs(e.$route.params);case 4:a=t.sent,console.log("eos new emcs ",a.data.emcs),e.emcs=Object(n["a"])(a.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getEMCsOnSchool:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCsOnSchool(e.$route.params);case 3:a=t.sent,console.log("eos school: ",e.$route.params.schoolCode,"; subject: ",e.$route.params.subjectCode,"; eos: ",a.data.emcsOnSchool),e.emcsOnSchool=a.data.emcsOnSchool,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},detachEMCFrom:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("eos detachEMCFrom"),a.next=4,ke.detachFrom(t.$route.params,e.emcId);case 4:o=a.sent,t.emcsOnSchool=Object(n["a"])(o.data.emcsOnSchool),t.getEMCs(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),t.error=a.t0;case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},swapApprovingStatusEMCOnSchool:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("eos not from the store: ",e),t.$store.dispatch("updateEMCOnSchoolApproval",e),a.next=5,ke.setEMCOnSchool(e);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},et=Ze,tt=Object(b["a"])(et,Fe,ye,!1,null,"8bf847ca",null),at=tt.exports;f()(tt,{VCard:Pe["a"],VCol:z["a"],VRow:N["a"]});var ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),a("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-checkbox",{attrs:{label:"Пользовательский"},model:{value:e.emc.isCustom,callback:function(t){e.$set(e.emc,"isCustom",t)},expression:"emc.isCustom"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"admin-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},ct=[],nt=a("3835"),rt={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsForEdit()},methods:{getEMCsForEdit:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCs(e.$route.params);case 3:a=t.sent,200===a.status?(o=Object(nt["a"])(a.data.emcs,1),c=o[0],console.log("response: ",c),e.emc=c):e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this.emc: ",e.emc),t.next=4,ke.setEMC(e.emc);case 4:e.$store.dispatch("updateEMC",e.emc),e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},st=rt,it=a("ac7c"),lt=a("b974"),ut=Object(b["a"])(st,ot,ct,!1,null,null,null),dt=ut.exports;f()(ut,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VCheckbox:it["a"],VContainer:K["a"],VSelect:lt["a"],VSpacer:_["a"],VTextField:de["a"]});var mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"admin-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},vt=[],pt={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,ke.createEMC(e.emc);case 5:e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ht=pt,bt=Object(b["a"])(ht,mt,vt,!1,null,null,null),Ct=bt.exports;f()(bt,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VContainer:K["a"],VSelect:lt["a"],VTextField:de["a"]});var ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-create"}}},[e._v(" Создать УМК ")])],1),a("v-col",{attrs:{cols:"12"}},[0===e.emcs.length?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету нету ")]):e._e()],1),a("v-col",{attrs:{cols:"12"}},e._l(e.emcs,(function(t){return a("v-card",{key:t.id},[a("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom,expression:"emc.isCustom"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Пользовательский ")])],1),a("p",[a("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name))]),a("p",[a("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors))]),a("p",[a("strong",[e._v(" Класс: ")]),e._v(" "+e._s(t.grades))]),a("p",[a("strong",[e._v(" Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных"))]),9==t.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]),t.createBy?a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.swapCreatingStatusEMC("emc")}}},[t.isCustom?a("div",[e._v("Сделать официальным (не работает вроде)")]):a("div",[e._v("Сделать снова пользовательским (не работает вроде)")])]):e._e(),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(a){return e.deleteEMC(t)}}},[e._v(" Удалить ")])],1)],1)})),1)],1):e._e()},gt=[],xt={data:function(){return{error:null}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","emcs"])),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCs(e.$route.params);case 3:a=t.sent,e.$store.commit("setEMCs",a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},swapCreatingStatusEMC:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:try{null!=e.createdBy&&t.$store.dispatch("swapCreatingStatusEMC",e)}catch(o){t.error=o}case 1:case"end":return a.stop()}}),a)})))()},deleteEMC:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("deleteEMC: ",e),a.next=4,ke.deleteEMC(e);case 4:o=a.sent,200===o.status&&t.$store.dispatch("deleteEMC",e),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.error=a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},St=xt,_t=Object(b["a"])(St,ft,gt,!1,null,null,null),Ot=_t.exports;f()(_t,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VChip:ze["a"],VCol:z["a"],VRow:N["a"],VSpacer:_["a"]});var jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-row",[a("v-col",[e._v(" PMO ")])],1):e._e()},wt=[],Et={getUserData:function(){return re().get("/pmo")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().get("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().get("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return console.log(e),re().put("/pmo/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().delete("/pmo/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return console.log("EMCOnSchool:",Object(d["a"])({},e)),re().put("/pmo/emcOnSchool/".concat(e.id),Object(d["a"])({},e))},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().post("/pmo/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return re().post("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"),a)},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return re().delete("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}},Mt={computed:Object(d["a"])({},Object(r["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Et.getUserData();case 3:a=t.sent,e.$store.dispatch("setAreas",a.data.areasAndSchools),e.$store.dispatch("setSubjects",a.data.subjects),e.$store.dispatch("setPublishers",a.data.publishers),e.$store.dispatch("setLevels",a.data.levels),e.$store.dispatch("setEMCs",a.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},kt=Mt,$t=Object(b["a"])(kt,jt,wt,!1,null,"04fe12fb",null),Vt=$t.exports;f()($t,{VCol:z["a"],VRow:N["a"]});var Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?a("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsOnSchool,(function(t){return a("v-row",{key:t.id},[a("EMCOnSchoolCard",{attrs:{"emc-on-school":t},on:{onDetachEMCFrom:e.detachEMCFrom,onSwapApprovingStatusEMCOnSchool:e.swapApprovingStatusEMCOnSchool}})],1)})),1)],1):e._e()},Rt=[],Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(e.emcOnSchool.EMC.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Подтверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:!e.emcOnSchool.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не подтверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id,expression:"emcOnSchool.EMC.isCustom && emcOnSchool.EMC.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Создано вами ")]),9==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e(),11==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e()],1),a("p",[a("strong",[e._v("Издательство:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Publisher.publisherName))]),a("p",[a("strong",[e._v("Авторы:")]),e._v(" "+e._s(e.emcOnSchool.EMC.authors))]),a("p",[a("strong",[e._v("Класс:")]),e._v(" "+e._s(e.emcOnSchool.EMC.grades))]),a("p",[a("strong",[e._v("Кол-во учеников:")]),e._v(" "+e._s(e.emcOnSchool.studentsCount))]),a("p",[a("strong",[e._v("Уровень:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Level?e.emcOnSchool.EMC.Level.name:"Нет данных")+" ")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onSwapApprovingStatusEMCOnSchool",e.emcOnSchool)}}},[e._v(" "+e._s(e.emcOnSchool.isApproved?"Отменить утверждение":"Утвердить")+" ")]),e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:e.emcOnSchool.emcId}}}},[e._v(" Редактировать ")]):e._e(),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК ")])],1),a("v-expand-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[a("v-card-text",{staticClass:"pb-0"},[a("p",[a("strong",[e._v("Причина исползования:")]),e._v(" "+e._s(e.emcOnSchool.usingCoz))]),a("p",[a("strong",[e._v("Причина изменений:")]),e._v(" "+e._s(e.emcOnSchool.correctionCoz))]),a("p",[a("strong",[e._v("Причина смены: ")]),e._v(" "+e._s(e.emcOnSchool.swapCoz))])])],1)],1)],1)],1)},yt=[],At={props:{emcOnSchool:{type:Object,default:null}},data:function(){return{isDetailing:!1}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","emcs"]))},Tt=At,Lt=(a("7899"),Object(b["a"])(Tt,Ft,yt,!1,null,"934289b2",null)),It=Lt.exports;f()(Lt,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VChip:ze["a"],VContainer:K["a"],VExpandTransition:Be["a"]});var Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.emc.previewData["Название"]))]),a("v-list-item-subtitle",[a("p",[e._v(" Авторы: "+e._s(t.item.emc.previewData["Авторы"])+"; Издатель: "+e._s(t.item.emc.previewData["Издатель"])+"; Классы: "+e._s(t.item.emc.previewData["Классы"])+" ")])])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),a("v-expand-transition",[e.model?a("v-list",[e._l(e.fields,(function(t,o){return a("v-list-item",{key:o},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),a("v-list-item",[a("v-text-field",{attrs:{type:"number",label:"Количество учеников"},model:{value:e.additionalDataForEMCOnSchool.studentsCount,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"studentsCount",t)},expression:"additionalDataForEMCOnSchool.studentsCount"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины использования"},model:{value:e.additionalDataForEMCOnSchool.usingCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"usingCoz",t)},expression:"additionalDataForEMCOnSchool.usingCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины смены"},model:{value:e.additionalDataForEMCOnSchool.swapCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"swapCoz",t)},expression:"additionalDataForEMCOnSchool.swapCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Планируемая корректировка"},model:{value:e.additionalDataForEMCOnSchool.correctionCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"correctionCoz",t)},expression:"additionalDataForEMCOnSchool.correctionCoz"}})],1)],2):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)},Ut=[],zt={data:function(){return{model:null,additionalDataForEMCOnSchool:{swapCoz:null,usingCoz:null,correctionCoz:null,studentsCount:0},descriptionLimit:200,error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(s["b"])(["emcs","emcsOnSchool","user"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,a){if(a&&a.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===a.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var o=a.title.concat(". ")+a.authors.concat(". ")+a.Publisher.name,c=o.length>e.descriptionLimit?o.slice(0,e.descriptionLimit).concat("..."):o,n=[];n.previewData={},n.previewData["Название"]=a.title,n.previewData["Авторы"]=a.authors,n.previewData["Издатель"]=a.Publisher.name,n.previewData["Предмет"]=a.Subject.name,n.previewData["Классы"]=a.grades,n.previewData["Уровень"]=a.gia,n.previewData["Создана вами"]=a.createdBy===e.user.id?"Да":"Нет",n.entry=a,t.push({Description:c,emc:n})}return t}),[])}}),watch:{$route:function(){this.model=null,this.getEMCs()}},created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Et.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(n["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Et.attachTo(e.$route.params,e.model.entry.id,Object(d["a"])({},e.additionalDataForEMCOnSchool));case 3:a=t.sent,e.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),e.model=null,e.getEMCs(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},Bt=zt,Nt=Object(b["a"])(Bt,Pt,Ut,!1,null,null,null),Gt=Nt.exports;f()(Nt,{VAutocomplete:Ke["a"],VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VCol:z["a"],VExpandTransition:Be["a"],VIcon:V["a"],VList:Qe["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"],VSpacer:_["a"],VTextField:de["a"]});var qt={components:{EMCOnSchoolCard:It,EMCOnSchoolSelector:Gt},data:function(){return{error:null}},computed:Object(d["a"])({},Object(s["b"])(["emcsOnSchool","isSignin","user","emcs"])),watch:{$route:function(){this.getEMCsOnSchool()}},created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},methods:{getEMCs:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("eos get emcs"),t.next=4,Et.getEMCs(e.$route.params);case 4:a=t.sent,console.log("eos new emcs ",a.data.emcs),e.emcs=Object(n["a"])(a.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getEMCsOnSchool:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Et.getEMCsOnSchool(e.$route.params);case 3:a=t.sent,console.log("eos school: ",e.$route.params.schoolCode,"; subject: ",e.$route.params.subjectCode,"; eos: ",a.data.emcsOnSchool),e.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},detachEMCFrom:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("eos detachEMCFrom"),a.next=4,Et.detachFrom(t.$route.params,e.emcId);case 4:o=a.sent,console.log("detachEMCFrom: ",o),t.emcsOnSchool=Object(n["a"])(o.data.emcsOnSchool),t.getEMCs(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),t.error=a.t0;case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},swapApprovingStatusEMCOnSchool:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("eos not from the store: ",e),t.$store.dispatch("updateEMCOnSchoolApproval",e),a.next=5,Et.setEMCOnSchool(e);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},Ht=qt,Jt=Object(b["a"])(Ht,Dt,Rt,!1,null,"8e92c2fc",null),Yt=Jt.exports;f()(Jt,{VCard:Pe["a"],VCol:z["a"],VRow:N["a"]});var Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),a("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"pmo-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},Qt=[],Wt={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsForEdit()},methods:{getEMCsForEdit:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Et.getEMCs(e.$route.params);case 3:a=t.sent,200===a.status?(o=Object(nt["a"])(a.data.emcs,1),c=o[0],console.log("response: ",c),e.emc=c):e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this.emc: ",e.emc),t.next=4,Et.setEMC(e.emc);case 4:e.$store.dispatch("updateEMC",e.emc),e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Xt=Wt,Zt=Object(b["a"])(Xt,Kt,Qt,!1,null,null,null),ea=Zt.exports;f()(Zt,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VContainer:K["a"],VSelect:lt["a"],VSpacer:_["a"],VTextField:de["a"]});var ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"pmo-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},aa=[],oa={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,Et.createEMC(e.emc);case 5:e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ca=oa,na=Object(b["a"])(ca,ta,aa,!1,null,null,null),ra=na.exports;f()(na,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VContainer:K["a"],VSelect:lt["a"],VTextField:de["a"]});var sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-create"}}},[e._v(" Создать УМК ")])],1),a("v-col",{attrs:{cols:"12"}},[0==e.emcsFilteredForPMO.length?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету нету ")]):e._e()],1),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsFilteredForPMO,(function(t){return a("v-card",{key:t.id},[a("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom&&t.createdBy===e.user.id,expression:"emc.isCustom && emc.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Созданный вами ")])],1),a("p",[a("strong",[e._v("Издательство: ")]),e._v(" "+e._s(t.Publisher.name))]),a("p",[a("strong",[e._v("Авторы: ")]),e._v(" "+e._s(t.authors))]),a("p",[a("strong",[e._v("Класс: ")]),e._v(" "+e._s(t.grades))]),a("p",[a("strong",[e._v("Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных"))]),9==t.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),a("v-card-actions",[t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]):e._e(),a("v-spacer"),t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(a){return e.deleteEMC(t)}}},[e._v(" Удалить ")]):e._e()],1)],1)})),1)],1):e._e()},ia=[],la={data:function(){return{error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(s["b"])(["isSignin","user","emcs"])),{},{emcsFilteredForPMO:function(){var e=this;return this.emcs.filter((function(t){return t.isCustom&&t.createdBy===e.user.id}))}}),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Et.getEMCs(e.$route.params);case 3:a=t.sent,e.$store.commit("setEMCs",a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteEMC:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Et.deleteEMC(e);case 3:o=a.sent,200===o.status&&t.$store.dispatch("deleteEMC",e),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},ua=la,da=Object(b["a"])(ua,sa,ia,!1,null,null,null),ma=da.exports;f()(da,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VChip:ze["a"],VCol:z["a"],VRow:N["a"],VSpacer:_["a"]});var va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-row",[a("v-col",[e._v(" POO ")])],1):e._e()},pa=[],ha={getUserData:function(){return re().get("/poo")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().get("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().get("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return re().put("/poo/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().delete("/poo/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return re().put("/poo/emcOnSchool/".concat(e.id),e)},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re().post("/poo/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return re().post("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"),a)},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return re().delete("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}},ba={computed:Object(d["a"])({},Object(r["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.getUserData();case 3:a=t.sent,e.$store.dispatch("setAreas",a.data.areasAndSchools),e.$store.dispatch("setSubjects",a.data.subjects),e.$store.dispatch("setPublishers",a.data.publishers),e.$store.dispatch("setLevels",a.data.levels),e.$store.dispatch("setEMCs",a.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},Ca=ba,fa=Object(b["a"])(Ca,va,pa,!1,null,"55ef062e",null),ga=fa.exports;f()(fa,{VCol:z["a"],VRow:N["a"]});var xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?a("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsOnSchool,(function(t){return a("v-row",{key:t.id},[a("EMCOnSchoolCard",{attrs:{"emc-on-school":t},on:{onDetachEMCFrom:e.detachEMCFrom}})],1)})),1)],1):e._e()},Sa=[],_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(e.emcOnSchool.EMC.title))]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Подтверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:!e.emcOnSchool.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не подтверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id,expression:"emcOnSchool.EMC.isCustom && emcOnSchool.EMC.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Создано вами ")]),9==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e(),11==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e()],1),a("p",[a("strong",[e._v("Издательство:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Publisher.publisherName))]),a("p",[a("strong",[e._v("Авторы:")]),e._v(" "+e._s(e.emcOnSchool.EMC.authors))]),a("p",[a("strong",[e._v("Класс:")]),e._v(" "+e._s(e.emcOnSchool.EMC.grades))]),a("p",[a("strong",[e._v("Кол-во учеников:")]),e._v(" "+e._s(e.emcOnSchool.studentsCount))]),a("p",[a("strong",[e._v("Уровень:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Level?e.emcOnSchool.EMC.Level.name:"Нет данных")+" ")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:e.emcOnSchool.emcId}}}},[e._v(" Редактировать ")]):e._e(),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК ")])],1),a("v-expand-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[a("v-card-text",{staticClass:"pb-0"},[a("p",[a("strong",[e._v("Причина исползования:")]),e._v(" "+e._s(e.emcOnSchool.usingCoz))]),a("p",[a("strong",[e._v("Причина изменений:")]),e._v(" "+e._s(e.emcOnSchool.correctionCoz))]),a("p",[a("strong",[e._v("Причина смены:")]),e._v(" "+e._s(e.emcOnSchool.swapCoz))])])],1)],1)],1)],1)},Oa=[],ja={props:{emcOnSchool:{type:Object,default:null}},data:function(){return{isDetailing:!1}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","emcs"]))},wa=ja,Ea=(a("8c33"),Object(b["a"])(wa,_a,Oa,!1,null,"1d712126",null)),Ma=Ea.exports;f()(Ea,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VChip:ze["a"],VContainer:K["a"],VExpandTransition:Be["a"]});var ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",rounded:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.emc.previewData["Название"]))]),a("v-list-item-subtitle",[a("p",[e._v(" Авторы: "+e._s(t.item.emc.previewData["Авторы"])+"; Издатель: "+e._s(t.item.emc.previewData["Издатель"])+"; Классы: "+e._s(t.item.emc.previewData["Классы"])+" ")])])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),a("v-expand-transition",[e.model?a("v-list",[e._l(e.fields,(function(t,o){return a("v-list-item",{key:o},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),a("v-list-item",[a("v-text-field",{attrs:{type:"number",label:"Количество учеников"},model:{value:e.additionalDataForEMCOnSchool.studentsCount,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"studentsCount",t)},expression:"additionalDataForEMCOnSchool.studentsCount"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины использования"},model:{value:e.additionalDataForEMCOnSchool.usingCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"usingCoz",t)},expression:"additionalDataForEMCOnSchool.usingCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины смены"},model:{value:e.additionalDataForEMCOnSchool.swapCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"swapCoz",t)},expression:"additionalDataForEMCOnSchool.swapCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Планируемая корректировка"},model:{value:e.additionalDataForEMCOnSchool.correctionCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"correctionCoz",t)},expression:"additionalDataForEMCOnSchool.correctionCoz"}})],1)],2):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)},$a=[],Va={data:function(){return{model:null,additionalDataForEMCOnSchool:{swapCoz:null,usingCoz:null,correctionCoz:null,studentsCount:0},descriptionLimit:200,error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(s["b"])(["emcs","emcsOnSchool","user"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,a){if(a&&a.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===a.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var o=a.title.concat(". ")+a.authors.concat(". ")+a.Publisher.name,c=o.length>e.descriptionLimit?o.slice(0,e.descriptionLimit).concat("..."):o,n=[];n.previewData={},n.previewData["Название"]=a.title,n.previewData["Авторы"]=a.authors,n.previewData["Издатель"]=a.Publisher.name,n.previewData["Предмет"]=a.Subject.name,n.previewData["Классы"]=a.grades,n.previewData["Уровень"]=a.gia,n.previewData["Создана вами"]=a.createdBy===e.user.id?"Да":"Нет",n.entry=a,t.push({Description:c,emc:n})}return t}),[])}}),watch:{$route:function(){this.model=null,this.getEMCs()}},created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(n["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.attachTo(e.$route.params,e.model.entry.id,Object(d["a"])({},e.additionalDataForEMCOnSchool));case 3:a=t.sent,e.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),e.model=null,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Da=Va,Ra=Object(b["a"])(Da,ka,$a,!1,null,null,null),Fa=Ra.exports;f()(Ra,{VAutocomplete:Ke["a"],VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VCol:z["a"],VExpandTransition:Be["a"],VIcon:V["a"],VList:Qe["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"],VSpacer:_["a"],VTextField:de["a"]});var ya={components:{EMCOnSchoolCard:Ma,EMCOnSchoolSelector:Fa},data:function(){return{error:null}},computed:Object(d["a"])({},Object(s["b"])(["emcsOnSchool","isSignin","user","emcs"])),watch:{$route:function(){this.getEMCsOnSchool()}},created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},methods:{getEMCs:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(n["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEMCsOnSchool:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.getEMCsOnSchool(e.$route.params);case 3:a=t.sent,e.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},detachEMCFrom:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ha.detachFrom(t.$route.params,e.emcId);case 3:o=a.sent,t.emcsOnSchool=Object(n["a"])(o.data.emcsOnSchool),t.getEMCs(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.error=a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},Aa=ya,Ta=Object(b["a"])(Aa,xa,Sa,!1,null,"aa82a46e",null),La=Ta.exports;f()(Ta,{VCard:Pe["a"],VCol:z["a"],VRow:N["a"]});var Ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),a("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"poo-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},Pa=[],Ua={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsForEdit()},methods:{getEMCsForEdit:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.getEMCs(e.$route.params);case 3:a=t.sent,200===a.status?(o=Object(nt["a"])(a.data.emcs,1),c=o[0],console.log("response: ",c),e.emc=c):e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this.emc: ",e.emc),t.next=4,ha.setEMC(e.emc);case 4:e.$store.dispatch("updateEMC",e.emc),e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},za=Ua,Ba=Object(b["a"])(za,Ia,Pa,!1,null,null,null),Na=Ba.exports;f()(Ba,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VContainer:K["a"],VSelect:lt["a"],VSpacer:_["a"],VTextField:de["a"]});var Ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"poo-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},qa=[],Ha={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,ha.createEMC(e.emc);case 5:e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Ja=Ha,Ya=Object(b["a"])(Ja,Ga,qa,!1,null,null,null),Ka=Ya.exports;f()(Ya,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VContainer:K["a"],VSelect:lt["a"],VTextField:de["a"]});var Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"poo-emc-create"}}},[e._v(" Создать УМК ")])],1),a("v-col",{attrs:{cols:"12"}},[0===e.emcsFilteredForPOO.length?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету созданных вами нету ")]):e._e()],1),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsFilteredForPOO,(function(t){return a("v-card",{key:t.id},[a("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title))]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom&&t.createdBy===e.user.id,expression:"emc.isCustom && emc.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Созданный вами ")])],1),a("p",[a("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name))]),a("p",[a("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors))]),a("p",[a("strong",[e._v(" Класс:")]),e._v(" "+e._s(t.grades))]),a("p",[a("strong",[e._v(" Уровень:")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных"))]),9==t.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),a("v-card-actions",[t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"poo-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]):e._e(),a("v-spacer"),t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(a){return e.deleteEMC(t)}}},[e._v(" Удалить ")]):e._e()],1)],1)})),1)],1):e._e()},Wa=[],Xa={data:function(){return{error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(s["b"])(["isSignin","user","emcs"])),{},{emcsFilteredForPOO:function(){var e=this;return this.emcs.filter((function(t){return t.isCustom&&t.createdBy===e.user.id}))}}),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(oe["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.getEMCs(e.$route.params);case 3:a=t.sent,e.$store.dispatch("setEMCs",a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteEMC:function(e){var t=this;return Object(oe["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ha.deleteEMC(e);case 3:o=a.sent,200===o.status&&t.$store.dispatch("deleteEMC",e),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},Za=Xa,eo=Object(b["a"])(Za,Qa,Wa,!1,null,null,null),to=eo.exports;f()(eo,{VBtn:x["a"],VCard:Pe["a"],VCardActions:Ue["a"],VCardText:Ue["b"],VCardTitle:Ue["c"],VChip:ze["a"],VCol:z["a"],VRow:N["a"],VSpacer:_["a"]}),o["a"].use(ee["a"]);var ao=function(e,t,a){i.state.isSignin&&1===i.state.user.UserRole.code?a():a("/")},oo=function(e,t,a){i.state.isSignin&&2===i.state.user.UserRole.code?a():a("/")},co=function(e,t,a){i.state.isSignin&&3===i.state.user.UserRole.code?a():a("/")},no=new ee["a"]({mode:"history",routes:[{path:"/",name:"/",component:ge},{path:"/signup",name:"signup",component:ve},{path:"/admin",name:"main-admin",component:Re,beforeEnter:ao},{name:"admin-emcs-on-school-index",path:"/admin/emcs-on-school",component:at,beforeEnter:ao},{name:"admin-emcs-on-school",path:"/admin/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:at,beforeEnter:ao},{name:"admin-emcs",path:"/admin/emcs",component:Ot,beforeEnter:ao},{name:"admin-subject-emcs",path:"/admin/subjects/:subjectCode/emcs",component:Ot,beforeEnter:ao},{name:"admin-emc-create",path:"/admin/emcs/create",component:Ct,beforeEnter:ao},{name:"admin-emc-edit",path:"/admin/emcs/:emcId/edit",component:dt,beforeEnter:ao},{path:"/pmo",name:"main-pmo",component:Vt,beforeEnter:oo},{name:"pmo-emcs-on-school-index",path:"/pmo/emcs-on-school",component:Yt,beforeEnter:oo},{name:"pmo-emcs-on-school",path:"/pmo/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:Yt,beforeEnter:oo},{name:"pmo-emcs",path:"/pmo/emcs",component:ma,beforeEnter:oo},{name:"pmo-subject-emcs",path:"/pmo/subjects/:subjectCode/emcs",component:ma,beforeEnter:oo},{name:"pmo-emc-create",path:"/pmo/emcs/create",component:ra,beforeEnter:oo},{name:"pmo-emc-edit",path:"/pmo/emcs/:emcId/edit",component:ea,beforeEnter:oo},{path:"/poo",name:"main-poo",component:ga,beforeEnter:co},{name:"poo-emcs-on-school-index",path:"/poo/emcs-on-school",component:La,beforeEnter:co},{name:"poo-emcs-on-school",path:"/poo/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:La,beforeEnter:co},{name:"poo-emcs",path:"/poo/emcs",component:to,beforeEnter:co},{name:"poo-subject-emcs",path:"/poo/subjects/:subjectCode/emcs",component:to,beforeEnter:co},{name:"poo-emc-create",path:"/poo/emcs/create",component:Ka,beforeEnter:co},{name:"poo-emc-edit",path:"/poo/emcs/:emcId/edit",component:Na,beforeEnter:co},{path:"*",component:we}]}),ro=a("f309");a("5363");o["a"].use(ro["a"]);var so=new ro["a"]({});o["a"].config.productionTip=!1,Object(c["sync"])(i,no),new o["a"]({store:i,router:no,vuetify:so,render:function(e){return e(Z)}}).$mount("#app")},"72bc":function(e,t,a){},7899:function(e,t,a){"use strict";a("7949")},7949:function(e,t,a){},"8c33":function(e,t,a){"use strict";a("d6c0")},cf05:function(e,t,a){e.exports=a.p+"img/logo.18cb333b.png"},d6c0:function(e,t,a){}});
//# sourceMappingURL=app.aa639d86.js.map