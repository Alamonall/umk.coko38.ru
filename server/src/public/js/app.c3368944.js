(function(e){function t(t){for(var n,c,s=t[0],i=t[1],l=t[2],d=0,m=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&m.push(o[c][0]),o[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==o[i]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},o={app:0},r=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://umk.coko38.ru/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=a("31bd"),r=a("5530"),c=a("2909"),s=(a("c740"),a("a434"),a("2f62")),i=a("5935");n["a"].use(s["a"]);var l=new s["a"].Store({strict:!0,state:{user:null,token:null,isSignin:!1,isSubjectsSidebar:!1,isAreasSidebar:!1,publishers:[],subjects:[],areas:[],levels:[],emcs:[],emcsOnSchool:[]},mutations:{updateField:i["c"],setToken:function(e,t){e.token=t,e.isSignin=!!t},setUser:function(e,t){e.user=t},setSubjectsSidebar:function(e,t){e.isSubjectsSidebar=t},setAreasSidebar:function(e,t){e.isAreasSidebar=t},setPublishers:function(e,t){e.publishers=t},setSubjects:function(e,t){e.subjects=t},setAreas:function(e,t){e.areas=t},setLevels:function(e,t){e.levels=t},setEMCs:function(e,t){e.emcs=t,e.emcs=Object(c["a"])(e.emcs)},updateEMC:function(e,t){var a=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==a&&(e.emcs[a]=Object(r["a"])({},t)),e.emcs=Object(c["a"])(e.emcs)},createEMC:function(e,t){t.publisherId=t.Publisher.id,t.levelId=t.Level.id,t.subjectId=t.Subject.id,e.emcs.push(t),e.emcs=Object(c["a"])(e.emcs)},deleteEMC:function(e,t){var a=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==a&&e.emcs.splice(a,1),e.emcs=Object(c["a"])(e.emcs)},updateEMCOnSchool:function(e,t){var a=e.emcsOnSchool.findIndex((function(e){return e.id===t.id}));-1!==a&&(e.emcsOnSchool[a]=Object(r["a"])({},t)),e.emcsOnSchool=Object(c["a"])(e.emcsOnSchool)}},actions:{setToken:function(e,t){var a=e.commit;a("setToken",t)},setUser:function(e,t){var a=e.commit;a("setUser",t)},setSubjectsSidebar:function(e,t){var a=e.commit;a("setSubjectsSidebar",t)},setAreasSidebar:function(e,t){var a=e.commit;a("setAreasSidebar",t)},setPublishers:function(e,t){var a=e.commit;a("setPublishers",t)},setSubjects:function(e,t){var a=e.commit;a("setSubjects",t)},setAreas:function(e,t){var a=e.commit;a("setAreas",t)},setLevels:function(e,t){var a=e.commit;a("setLevels",t)},setEMCs:function(e,t){var a=e.commit;a("setEMCs",t)},updateEMCOnSchool:function(e,t){var a=e.commit;a("updateEMCOnSchool",t)},updateEMC:function(e,t){var a=e.commit;a("updateEMC",t)},createEMC:function(e,t){var a=e.commit;a("createEMC",t)},deleteEMC:function(e,t){var a=e.commit;a("deleteEMC",t)}},getters:{getField:i["a"]}}),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("PageHeader"),e.isAreasSidebar&&e.isSignin?a("TheSidebar",e._l(e.areas,(function(t){return a("v-list-group",{key:t.AreaID,attrs:{value:!1,"prepend-icon":"mdi-account-circle"},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",[e._v(e._s(t.name))])]},proxy:!0}],null,!0)},e._l(t.Schools,(function(n){return a("v-list-group",{key:n.id,attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{attrs:{blue:""}},[e._v(e._s(n.code)+" "+e._s(n.name)+" ")])],1)]},proxy:!0}],null,!0)},e._l(e.subjects,(function(o){return a("v-list-item",{key:o.SubjectGlobalID,attrs:{value:!1,link:""}},[a("v-list-item-content",[1==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"admin-emcs-on-school",params:{areaCode:t.code,schoolCode:n.code,subjectCode:o.code}}}},[e._v(" "+e._s(o.name)+" ")]):e._e(),2==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs-on-school",params:{areaCode:t.code,schoolCode:n.code,subjectCode:o.code}}}},[e._v(" "+e._s(o.name)+" ")]):e._e(),3==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"poo-emcs-on-school",params:{areaCode:t.code,schoolCode:n.code,subjectCode:o.code}}}},[e._v(" "+e._s(o.name)+" ")]):e._e()],1)],1)})),1)})),1)})),1):e._e(),e.isSubjectsSidebar&&e.isSignin?a("TheSidebar",e._l(e.subjects,(function(t){return a("v-list-item",{key:t.SubjectGlobalID,attrs:{value:!1,link:""}},[a("v-list-item-content",[1==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"admin-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),2==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"pmo-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),3==e.user.UserRole.code?a("v-btn",{attrs:{plain:"",to:{name:"poo-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)],1)})),1):e._e(),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1),a("TheFooter")],1)},d=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{app:"","clipped-left":""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:a("cf05"),transition:"scale-transition",width:"40"}})],1),e.isSignin?e._e():n("v-btn",{attrs:{plain:"",to:{name:"/"}}},[e._v(" Система учёта УМК ")]),e.isSignin?n("div",[n("v-btn",{attrs:{plain:"",to:{path:"/"+e.user.UserRole.name}}},[e._v(" Система учёта УМК ")]),1==e.user.UserRole.code?n("v-btn",{attrs:{plain:"",to:{name:"admin-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),1==e.user.UserRole.code?n("v-btn",{attrs:{plain:"",to:{name:"admin-emcs"}}},[e._v(" Конструктор ")]):e._e(),2==e.user.UserRole.code?n("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),2==e.user.UserRole.code?n("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs"}}},[e._v(" Конструктор ")]):e._e(),3==e.user.UserRole.code?n("v-btn",{attrs:{plain:"",to:{name:"poo-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),3==e.user.UserRole.code?n("v-btn",{attrs:{plain:"",to:{name:"poo-emcs"}}},[e._v(" Конструктор ")]):e._e()],1):e._e(),n("v-spacer"),e.isSignin?n("v-btn",{attrs:{plain:"",to:{path:"/"+e.user.UserRole.name}}},[e._v(" "+e._s(e.user.username))]):e._e(),e.isSignin?n("v-btn",{attrs:{plain:""},on:{click:e.signout}},[e._v(" Выход ")]):e._e(),e.isSignin?e._e():n("v-btn",{attrs:{plain:"",to:{name:"/"}}},[e._v(" Войти ")])],1)},v=[],h={computed:Object(r["a"])({},Object(s["b"])(["isSignin","user"])),methods:{signout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"/"})}}},p=h,b=a("2877"),C=a("6544"),f=a.n(C),S=a("40dc"),x=a("8336"),O=a("adda"),g=a("2fa4"),_=Object(b["a"])(p,m,v,!1,null,null,null),j=_.exports;f()(_,{VAppBar:S["a"],VBtn:x["a"],VImg:O["a"],VSpacer:g["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{app:"",width:"20%",left:"true",permanent:"",absolute:"",clipped:""}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-icon",[a("v-icon",[e._v("mdi-home")])],1),a("v-list-item-title",[e._v(" МО")]),a("v-list-item-subtitle",[e._v("Выберите оъект ")])],1)],1),a("v-divider"),e._t("default",(function(){return[e._v(" Нет данных ")]}))],2)},w=[],M={},k=M,V=a("ce7e"),$=a("132d"),D=a("da13"),R=a("5d23"),T=a("34c3"),A=a("f774"),F=Object(b["a"])(k,E,w,!1,null,"9931fdc2",null),y=F.exports;f()(F,{VDivider:V["a"],VIcon:$["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemIcon:T["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VNavigationDrawer:A["a"]});var I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{app:"",outlined:"",padless:""}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[e._l(e.links,(function(t){return a("v-btn",{key:t.link,staticClass:"my-2",attrs:{text:"",rounded:"",href:t.link,target:"_blank",link:""}},[a("v-icon",{attrs:{color:"blue",size:"24px"}},[e._v(" "+e._s(t.icon)+" ")])],1)})),a("v-col",{staticClass:"py-4 text-center",attrs:{cols:"12"}},[e._v(" ГАУ ИО ЦОПМКиМКО © "+e._s((new Date).getFullYear())+" ")])],2)],1)},z=[],L={data:function(){return{links:[{name:"Наш сайт",link:"https://coko38.ru",icon:"mdi-home-circle"},{name:"ВКонтакте",link:"https://vk.com/public196012235",icon:"mdi-vk"},{name:"Facebook",link:"https://www.facebook.com/groups/249765916319275/",icon:"mdi-facebook"},{name:"Instagram",link:"https://www.instagram.com/copmkimko/?hl=ru",icon:"mdi-instagram"}]}}},P=L,U=a("62ad"),B=a("553a"),N=a("0fd9"),G=Object(b["a"])(P,I,z,!1,null,null,null),q=G.exports;f()(G,{VBtn:x["a"],VCol:U["a"],VFooter:B["a"],VIcon:$["a"],VRow:N["a"]});var H={name:"App",components:{PageHeader:j,TheSidebar:y,TheFooter:q},data:function(){return{err:null}},computed:Object(r["a"])({},Object(s["b"])(["isSignin","user","isSubjectsSidebar","isAreasSidebar","subjects","areas"])),created:function(){document.title="АИС «УМК»"}},J=H,Y=a("7496"),K=a("a523"),Q=a("56b0"),W=a("f6c4"),X=Object(b["a"])(J,u,d,!1,null,null,null),Z=X.exports;f()(X,{VApp:Y["a"],VBtn:x["a"],VContainer:K["a"],VListGroup:Q["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemTitle:R["c"],VMain:W["a"]});var ee=a("8c4f"),te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"d-flex justify-center"},[a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"3"}},[a("v-form",[a("v-text-field",{attrs:{type:"username",name:"username",autocomplete:"off",maxlength:"20"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{autocomplete:"off",type:"password",name:"input-10-1",label:"Normal with hint text",hint:"At least 8 characters"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{on:{click:e.signup}},[e._v(" Зарегистрироваться ")])],1)],1)],1)},ae=[],ne=a("1da1"),oe=(a("96cf"),a("bc3a")),re=a.n(oe),ce=function(){return re.a.create({headers:{Authorization:"Bearer ".concat(l.state.token)}})},se={signup:function(e){return ce().post("signup",e)},signin:function(e){return ce().post("signin",e)}},ie={data:function(){return{username:"Введите логин",password:"Пароль"}},methods:{signup:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,se.signup({username:e.username,password:e.password});case 2:case"end":return t.stop()}}),t)})))()}}},le=ie,ue=a("4bd4"),de=a("8654"),me=Object(b["a"])(le,te,ae,!1,null,"1f71653f",null),ve=me.exports;f()(me,{VBtn:x["a"],VCol:U["a"],VForm:ue["a"],VRow:N["a"],VTextField:de["a"]});var he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"d-flex justify-center"},[a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"3"}},[a("v-form",[a("v-text-field",{attrs:{type:"username",name:"username",maxlength:"20",placeholder:"Введите логин",require:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{type:"password",name:"input-10-1",label:"Введите пароль",placeholder:"Введите пароль",hint:"Как минимум 8 символов",require:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{on:{click:e.signin}},[e._v(" Войти ")])],1)],1)],1)},pe=[],be={data:function(){return{username:"",password:"",error:null}},methods:{signin:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.signin({username:e.username,password:e.password});case 3:a=t.sent,e.$store.dispatch("setToken",a.data.token),e.$store.dispatch("setUser",a.data.user),1===e.$store.state.user.UserRole.code?e.$router.push("/admin"):2===e.$store.state.user.UserRole.code?e.$router.push("/pmo"):3===e.$store.state.user.UserRole.code&&e.$router.push("/poo"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},Ce=be,fe=Object(b["a"])(Ce,he,pe,!1,null,"574570b4",null),Se=fe.exports;f()(fe,{VBtn:x["a"],VCol:U["a"],VForm:ue["a"],VRow:N["a"],VTextField:de["a"]});var xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center align-center"},[e._v("Страница не найдена")])},Oe=[],ge={},_e=ge,je=Object(b["a"])(_e,xe,Oe,!1,null,null,null),Ee=je.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-row",[a("v-col",[e._v(" Admin ")])],1):e._e()},Me=[],ke=(a("99af"),{getUserData:function(){return ce().get("/admin")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().get("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().get("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return ce().put("/admin/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().delete("/admin/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return console.log("setEMCOnSchool: ",Object(r["a"])({},e)),ce().put("/admin/emcOnSchool/".concat(e.id),Object(r["a"])({},e))},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().post("/admin/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return ce().post("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"),a)},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ce().delete("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}}),Ve={computed:Object(r["a"])({},Object(s["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getUserData();case 3:a=t.sent,e.$store.dispatch("setAreas",a.data.areasAndSchools),e.$store.dispatch("setSubjects",a.data.subjects),e.$store.dispatch("setPublishers",a.data.publishers),e.$store.dispatch("setLevels",a.data.levels),e.$store.dispatch("setEMCs",a.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},$e=Ve,De=Object(b["a"])($e,we,Me,!1,null,"3e0d7443",null),Re=De.exports;f()(De,{VCol:U["a"],VRow:N["a"]});var Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-container",{attrs:{fluid:""}},[e.$route.params.subjectCode?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"text-center"},[e._v(e._s(e.subjectTitle))])])],1):e._e(),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?a("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsOnSchool,(function(t){return a("v-row",{key:t.id},[a("EMCOnSchoolCard",{attrs:{"emc-on-school":t},on:{onDetachEMCFrom:e.detachEMCFrom,onSwapApprovingStatusEMCOnSchool:e.swapApprovingStatusEMCOnSchool}})],1)})),1)],1)],1):e._e()},Ae=[],Fe=(a("b0c0"),a("7db0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(e.emcOnSchool.EMC.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Утверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:!e.emcOnSchool.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не утверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.EMC.isCustom,expression:"emcOnSchool.EMC.isCustom"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Пользовательский ")])],1),a("p",[a("strong",[e._v("Издательство:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Publisher.publisherName))]),a("p",[a("strong",[e._v("Авторы:")]),e._v(" "+e._s(e.emcOnSchool.EMC.authors))]),a("p",[a("strong",[e._v("Класс:")]),e._v(" "+e._s(e.emcOnSchool.EMC.grades))]),a("p",[a("strong",[e._v("Кол-во учеников:")]),e._v(" "+e._s(e.emcOnSchool.studentsCount))]),a("p",[a("strong",[e._v("Уровень:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Level?e.emcOnSchool.EMC.Level.name:"Нет данных")+" ")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onSwapApprovingStatusEMCOnSchool",e.emcOnSchool)}}},[e._v(" "+e._s(e.emcOnSchool.isApproved?"Отменить утверждение":"Утвердить")+" ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-edit",params:{emcId:e.emcOnSchool.emcId}}}},[e._v(" Редактировать ")]),e.$route.params.subjectCode?a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК ")]):e._e(),e.$route.params.subjectCode?e._e():a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК от всех МО и ОО ")])],1),a("v-expand-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[a("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Кол-во учеников")]),a("v-tab",[e._v("Причина использования")]),a("v-tab",[e._v("Причина изменения")]),a("v-tab",[e._v("Причина смены")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Кол-во учеников",additionalEOSDataValue:e.emcOnSchool.studentsCount,isNumber:!0},on:{onSaveAdditionalData:e.saveStudentsCount}}),e._v(" "+e._s(e.emcOnSchool.studentsCount))],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина использования",additionalEOSDataValue:e.emcOnSchool.usingCoz},on:{onSaveAdditionalData:e.saveUsingCozComment}}),e._v(" "+e._s(e.emcOnSchool.usingCoz)+" ")],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина изменения",additionalEOSDataValue:e.emcOnSchool.correctionCoz},on:{onSaveAdditionalData:e.saveCorrectionCozComment}}),e._v(" "+e._s(e.emcOnSchool.correctionCoz))],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина смены",additionalEOSDataValue:e.emcOnSchool.swapCoz},on:{onSaveAdditionalData:e.saveSwapCozComment}}),e._v(" "+e._s(e.emcOnSchool.swapCoz))],1)],1)],1)],1)],1)],1)],1)],1)}),ye=[],Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":"640","min-width":"480"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",plain:""}},"v-btn",o,!1),n),[a("v-icon",[e._v("mdi-border-color")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 text-center",domProps:{textContent:e._s(e.additionalEOSTitle)}}),a("v-card-text",[a("v-text-field",{attrs:{type:e.isNumber?"number":"text"},model:{value:e.localAdditionalEOSDataValue,callback:function(t){e.localAdditionalEOSDataValue=t},expression:"localAdditionalEOSDataValue"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"red lighten-1",text:""},on:{click:function(t){e.dialog=!1,e.localAdditionalEOSDataValue=null}}},[e._v(" Отменить ")]),a("v-spacer"),a("v-btn",{attrs:{color:"teal accent-3",text:""},on:{click:function(t){e.dialog=!1,e.$emit("onSaveAdditionalData",e.localAdditionalEOSDataValue)}}},[e._v(" Сохранить ")])],1)],1)],1)},ze=[],Le={props:["additionalEOSTitle","additionalEOSDataValue","isNumber"],data:function(){return{dialog:!1,localAdditionalEOSDataValue:null}},created:function(){this.localAdditionalEOSDataValue=this.additionalEOSDataValue},watch:{localAdditionalEOSDataValue:function(e){this.localAdditionalEOSDataValue=e}}},Pe=Le,Ue=a("b0af"),Be=a("99d9"),Ne=a("169a"),Ge=Object(b["a"])(Pe,Ie,ze,!1,null,null,null),qe=Ge.exports;f()(Ge,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VDialog:Ne["a"],VIcon:$["a"],VSpacer:g["a"],VTextField:de["a"]});var He={components:{TheEditAdditionalEOSData:qe},props:{emcOnSchool:{type:Object,default:null}},data:function(){return{error:null,tab:null,isDetailing:!1}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","emcs","emcsOnSchool"])),methods:{saveUsingCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ke.setEMCOnSchool({id:t.emcOnSchool.id,usingCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveCorrectionCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ke.setEMCOnSchool({id:t.emcOnSchool.id,correctionCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveSwapCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ke.setEMCOnSchool({id:t.emcOnSchool.id,swapCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveStudentsCount:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ke.setEMCOnSchool({id:t.emcOnSchool.id,studentsCount:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},Je=He,Ye=(a("ee2d"),a("cc20")),Ke=a("0789"),Qe=a("71a3"),We=a("c671"),Xe=a("fe57"),Ze=a("aac8"),et=Object(b["a"])(Je,Fe,ye,!1,null,"fdc5ed9a",null),tt=et.exports;f()(et,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VChip:Ye["a"],VContainer:K["a"],VExpandTransition:Ke["a"],VTab:Qe["a"],VTabItem:We["a"],VTabs:Xe["a"],VTabsItems:Ze["a"]});var at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.emc.previewData["Название"]))]),a("v-list-item-subtitle",[a("p",[e._v(" Авторы: "+e._s(t.item.emc.previewData["Авторы"])+"; Издатель: "+e._s(t.item.emc.previewData["Издатель"])+"; Классы: "+e._s(t.item.emc.previewData["Классы"])+" ")])])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),a("v-expand-transition",[e.model?a("v-list",[e._l(e.fields,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),a("v-list-item",[a("v-text-field",{attrs:{type:"number",label:"Количество учеников"},model:{value:e.additionalDataForEMCOnSchool.studentsCount,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"studentsCount",t)},expression:"additionalDataForEMCOnSchool.studentsCount"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины использования"},model:{value:e.additionalDataForEMCOnSchool.usingCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"usingCoz",t)},expression:"additionalDataForEMCOnSchool.usingCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины смены"},model:{value:e.additionalDataForEMCOnSchool.swapCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"swapCoz",t)},expression:"additionalDataForEMCOnSchool.swapCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Планируемая корректировка"},model:{value:e.additionalDataForEMCOnSchool.correctionCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"correctionCoz",t)},expression:"additionalDataForEMCOnSchool.correctionCoz"}})],1)],2):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)},nt=[],ot=(a("d81d"),a("b64b"),a("4de4"),a("fb6a"),{data:function(){return{model:null,additionalDataForEMCOnSchool:{swapCoz:null,usingCoz:null,correctionCoz:null,studentsCount:0},descriptionLimit:200,error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["emcs","emcsOnSchool","user"])),{},{fields:function(){var e=this;return this.model?(console.log(this.model.previewData),Object.keys(this.model.previewData).map((function(t){return console.log(e.model),console.log(e.model.previewData[t]),{key:e.model.previewData[t],value:t}}))):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,a){if(a&&a.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===a.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var n=a.title.concat(". ")+a.authors.concat(". ")+a.Publisher.name,o=n.length>e.descriptionLimit?n.slice(0,e.descriptionLimit).concat("..."):n,r=[];r.previewData={},r.previewData["Название"]=a.title,r.previewData["Авторы"]=a.authors,r.previewData["Издатель"]=a.Publisher.name,r.previewData["Предмет"]=a.Subject.name,r.previewData["Классы"]=a.grades,r.previewData["Уровень"]=a.Level.name,r.previewData["Пользовательская"]=a.isCustom?"Да":"Нет",r.entry=a,t.push({Description:o,emc:r})}return t}),[])}}),watch:{$route:function(){this.model=null,this.getEMCs()}},created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(c["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.attachTo(e.$route.params,e.model.entry.id,Object(r["a"])({},e.additionalDataForEMCOnSchool));case 3:a=t.sent,e.emcsOnSchool=a.data.emcsOnSchool,e.model=null,e.getEMCs(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}}),rt=ot,ct=a("c6a6"),st=a("8860"),it=Object(b["a"])(rt,at,nt,!1,null,null,null),lt=it.exports;f()(it,{VAutocomplete:ct["a"],VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VCol:U["a"],VExpandTransition:Ke["a"],VIcon:$["a"],VList:st["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"],VSpacer:g["a"],VTextField:de["a"]});var ut={components:{EMCOnSchoolCard:tt,EMCOnSchoolSelector:lt},data:function(){return{error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["emcsOnSchool","isSignin","user","emcs","subjects"])),{},{subjectTitle:function(){var e=this;return this.subjects.find((function(t){return t.code===e.$route.params.subjectCode})).name}}),watch:{$route:function(){this.getEMCsOnSchool()}},created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},methods:{getEMCs:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(c["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEMCsOnSchool:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCsOnSchool(e.$route.params);case 3:a=t.sent,e.emcsOnSchool=Object(c["a"])(a.data.emcsOnSchool),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},detachEMCFrom:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ke.detachFrom(t.$route.params,e.emcId);case 3:n=a.sent,t.emcsOnSchool=Object(c["a"])(n.data.emcsOnSchool),t.getEMCs(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.error=a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},swapApprovingStatusEMCOnSchool:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ke.setEMCOnSchool(Object(r["a"])(Object(r["a"])({},e),{},{isApproved:!e.isApproved}));case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},dt=ut,mt=Object(b["a"])(dt,Te,Ae,!1,null,"4c84a105",null),vt=mt.exports;f()(mt,{VCard:Ue["a"],VCol:U["a"],VContainer:K["a"],VRow:N["a"]});var ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),a("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),e.emc.createdBy?a("v-checkbox",{attrs:{label:"Пользовательский"},model:{value:e.emc.isCustom,callback:function(t){e.$set(e.emc,"isCustom",t)},expression:"emc.isCustom"}}):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"admin-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},pt=[],bt=a("3835"),Ct={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCForEdit()},methods:{getEMCForEdit:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCs(e.$route.params);case 3:a=t.sent,void 0===a.data.error?(n=Object(bt["a"])(a.data.emcs,1),o=n[0],e.emc=o):e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("save this.emc : ",e.emc),t.next=4,ke.setEMC(Object(r["a"])(Object(r["a"])({},e.emc),{},{publisherId:e.emc.Publisher.id,levelId:e.emc.Level.id,subjectId:e.emc.Subject.id}));case 4:a=t.sent,e.$store.dispatch("updateEMC",a.data.emc),console.log("save emc : ",a),e.$router.push({name:"admin-subject-emcs",params:{subjectCode:a.data.emc.Subject.code}}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},ft=Ct,St=a("ac7c"),xt=a("b974"),Ot=Object(b["a"])(ft,ht,pt,!1,null,null,null),gt=Ot.exports;f()(Ot,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VCheckbox:St["a"],VContainer:K["a"],VSelect:xt["a"],VSpacer:g["a"],VTextField:de["a"]});var _t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"admin-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},jt=[],Et={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,ke.createEMC(e.emc);case 5:e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},wt=Et,Mt=Object(b["a"])(wt,_t,jt,!1,null,null,null),kt=Mt.exports;f()(Mt,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VContainer:K["a"],VSelect:xt["a"],VTextField:de["a"]});var Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-create"}}},[e._v(" Создать УМК ")])],1),a("v-col",{attrs:{cols:"12"}},[0===e.emcs.length?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету нету ")]):e._e()],1),a("v-col",{attrs:{cols:"12"}},e._l(e.emcs,(function(t){return a("v-card",{key:t.id},[a("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom,expression:"emc.isCustom"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Пользовательский ")])],1),a("p",[a("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name))]),a("p",[a("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors))]),a("p",[a("strong",[e._v(" Класс: ")]),e._v(" "+e._s(t.grades))]),a("p",[a("strong",[e._v(" Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных"))]),9==t.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]),t.createBy?a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.swapCreatingStatusEMC("emc")}}},[t.isCustom?a("div",[e._v("Сделать официальным (не работает вроде)")]):a("div",[e._v("Сделать снова пользовательским (не работает вроде)")])]):e._e(),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(a){return e.deleteEMC(t)}}},[e._v(" Удалить ")])],1)],1)})),1)],1):e._e()},$t=[],Dt={data:function(){return{error:null}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","emcs"])),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke.getEMCs(e.$route.params);case 3:a=t.sent,e.$store.commit("setEMCs",a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},swapCreatingStatusEMC:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:try{null!=e.createdBy&&t.$store.dispatch("swapCreatingStatusEMC",e)}catch(n){t.error=n}case 1:case"end":return a.stop()}}),a)})))()},deleteEMC:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("deleteEMC: ",e),a.next=4,ke.deleteEMC(e);case 4:n=a.sent,200===n.status&&t.$store.dispatch("deleteEMC",e),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.error=a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},Rt=Dt,Tt=Object(b["a"])(Rt,Vt,$t,!1,null,null,null),At=Tt.exports;f()(Tt,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VChip:Ye["a"],VCol:U["a"],VRow:N["a"],VSpacer:g["a"]});var Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-row",[a("v-col",[e._v(" PMO ")])],1):e._e()},yt=[],It={getUserData:function(){return ce().get("/pmo")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().get("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().get("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return console.log(e),ce().put("/pmo/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().delete("/pmo/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return console.log("EMCOnSchool:",Object(r["a"])({},e)),ce().put("/pmo/emcOnSchool/".concat(e.id),Object(r["a"])({},e))},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().post("/pmo/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return ce().post("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"),a)},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ce().delete("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}},zt={computed:Object(r["a"])({},Object(s["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getUserData();case 3:a=t.sent,e.$store.dispatch("setAreas",a.data.areasAndSchools),e.$store.dispatch("setSubjects",a.data.subjects),e.$store.dispatch("setPublishers",a.data.publishers),e.$store.dispatch("setLevels",a.data.levels),e.$store.dispatch("setEMCs",a.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},Lt=zt,Pt=Object(b["a"])(Lt,Ft,yt,!1,null,"04fe12fb",null),Ut=Pt.exports;f()(Pt,{VCol:U["a"],VRow:N["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-container",{attrs:{fluid:""}},[e.$route.params.subjectCode?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"text-center"},[e._v(e._s(e.subjectTitle))])])],1):e._e(),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?a("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsOnSchool,(function(t){return a("v-row",{key:t.id},[a("EMCOnSchoolCard",{attrs:{"emc-on-school":t},on:{onDetachEMCFrom:e.detachEMCFrom,onSwapApprovingStatusEMCOnSchool:e.swapApprovingStatusEMCOnSchool}})],1)})),1)],1)],1):e._e()},Nt=[],Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(e.emcOnSchool.EMC.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Утверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:!e.emcOnSchool.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не утверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id,expression:"emcOnSchool.EMC.isCustom && emcOnSchool.EMC.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Создано вами ")]),9==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e(),11==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e()],1),a("p",[a("strong",[e._v("Издательство:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Publisher.publisherName))]),a("p",[a("strong",[e._v("Авторы:")]),e._v(" "+e._s(e.emcOnSchool.EMC.authors))]),a("p",[a("strong",[e._v("Класс:")]),e._v(" "+e._s(e.emcOnSchool.EMC.grades))]),a("p",[a("strong",[e._v("Кол-во учеников:")]),e._v(" "+e._s(e.emcOnSchool.studentsCount))]),a("p",[a("strong",[e._v("Уровень:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Level?e.emcOnSchool.EMC.Level.name:"Нет данных")+" ")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onSwapApprovingStatusEMCOnSchool",e.emcOnSchool)}}},[e._v(" "+e._s(e.emcOnSchool.isApproved?"Отменить утверждение":"Утвердить")+" ")]),e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:e.emcOnSchool.emcId}}}},[e._v(" Редактировать ")]):e._e(),e.$route.params.subjectCode?a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК ")]):e._e(),e.$route.params.subjectCode?e._e():a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК от всех ОО ")])],1),a("v-expand-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[a("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Кол-во учеников")]),a("v-tab",[e._v("Причина использования")]),a("v-tab",[e._v("Причина изменения")]),a("v-tab",[e._v("Причина смены")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Кол-во учеников",additionalEOSDataValue:e.emcOnSchool.studentsCount,isNumber:!0},on:{onSaveAdditionalData:e.saveStudentsCount}}),e._v(" "+e._s(e.emcOnSchool.studentsCount))],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина использования",additionalEOSDataValue:e.emcOnSchool.usingCoz},on:{onSaveAdditionalData:e.saveUsingCozComment}}),e._v(" "+e._s(e.emcOnSchool.usingCoz)+" ")],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина изменения",additionalEOSDataValue:e.emcOnSchool.correctionCoz},on:{onSaveAdditionalData:e.saveCorrectionCozComment}}),e._v(" "+e._s(e.emcOnSchool.correctionCoz))],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина смены",additionalEOSDataValue:e.emcOnSchool.swapCoz},on:{onSaveAdditionalData:e.saveSwapCozComment}}),e._v(" "+e._s(e.emcOnSchool.swapCoz))],1)],1)],1)],1)],1)],1)],1)],1)},qt=[],Ht={components:{TheEditAdditionalEOSData:qe},props:{emcOnSchool:{type:Object,default:null}},data:function(){return{error:null,tab:null,isDetailing:!1}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","emcs","emcsOnSchool"])),methods:{saveUsingCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.setEMCOnSchool({id:t.emcOnSchool.id,usingCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveCorrectionCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.setEMCOnSchool({id:t.emcOnSchool.id,correctionCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveSwapCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.setEMCOnSchool({id:t.emcOnSchool.id,swapCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveStudentsCount:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.setEMCOnSchool({id:t.emcOnSchool.id,studentsCount:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},Jt=Ht,Yt=(a("6a44"),Object(b["a"])(Jt,Gt,qt,!1,null,"58cd33c9",null)),Kt=Yt.exports;f()(Yt,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VChip:Ye["a"],VContainer:K["a"],VExpandTransition:Ke["a"],VTab:Qe["a"],VTabItem:We["a"],VTabs:Xe["a"],VTabsItems:Ze["a"]});var Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.emc.previewData["Название"]))]),a("v-list-item-subtitle",[a("p",[e._v(" Авторы: "+e._s(t.item.emc.previewData["Авторы"])+"; Издатель: "+e._s(t.item.emc.previewData["Издатель"])+"; Классы: "+e._s(t.item.emc.previewData["Классы"])+" ")])])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),a("v-expand-transition",[e.model?a("v-list",[e._l(e.fields,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),a("v-list-item",[a("v-text-field",{attrs:{type:"number",label:"Количество учеников"},model:{value:e.additionalDataForEMCOnSchool.studentsCount,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"studentsCount",t)},expression:"additionalDataForEMCOnSchool.studentsCount"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины использования"},model:{value:e.additionalDataForEMCOnSchool.usingCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"usingCoz",t)},expression:"additionalDataForEMCOnSchool.usingCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины смены"},model:{value:e.additionalDataForEMCOnSchool.swapCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"swapCoz",t)},expression:"additionalDataForEMCOnSchool.swapCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Планируемая корректировка"},model:{value:e.additionalDataForEMCOnSchool.correctionCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"correctionCoz",t)},expression:"additionalDataForEMCOnSchool.correctionCoz"}})],1)],2):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)},Wt=[],Xt={data:function(){return{model:null,additionalDataForEMCOnSchool:{swapCoz:null,usingCoz:null,correctionCoz:null,studentsCount:0},descriptionLimit:200,error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["emcs","emcsOnSchool","user"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,a){if(a&&a.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===a.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var n=a.title.concat(". ")+a.authors.concat(". ")+a.Publisher.name,o=n.length>e.descriptionLimit?n.slice(0,e.descriptionLimit).concat("..."):n,r=[];r.previewData={},r.previewData["Название"]=a.title,r.previewData["Авторы"]=a.authors,r.previewData["Издатель"]=a.Publisher.name,r.previewData["Предмет"]=a.Subject.name,r.previewData["Классы"]=a.grades,r.previewData["Уровень"]=a.Level.name,r.previewData["Создана вами"]=a.createdBy===e.user.id?"Да":"Нет",r.entry=a,t.push({Description:o,emc:r})}return t}),[])}}),watch:{$route:function(){this.model=null,this.getEMCs()}},created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(c["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.attachTo(e.$route.params,e.model.entry.id,Object(r["a"])({},e.additionalDataForEMCOnSchool));case 3:a=t.sent,e.emcsOnSchool=Object(c["a"])(a.data.emcsOnSchool),e.model=null,e.getEMCs(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},Zt=Xt,ea=Object(b["a"])(Zt,Qt,Wt,!1,null,null,null),ta=ea.exports;f()(ea,{VAutocomplete:ct["a"],VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VCol:U["a"],VExpandTransition:Ke["a"],VIcon:$["a"],VList:st["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"],VSpacer:g["a"],VTextField:de["a"]});var aa={components:{EMCOnSchoolCard:Kt,EMCOnSchoolSelector:ta},data:function(){return{error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["emcsOnSchool","isSignin","user","emcs","subjects"])),{},{subjectTitle:function(){var e=this;return this.subjects.find((function(t){return t.code===e.$route.params.subjectCode})).name}}),watch:{$route:function(){this.getEMCsOnSchool()}},created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},methods:{getEMCs:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(c["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEMCsOnSchool:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getEMCsOnSchool(e.$route.params);case 3:a=t.sent,e.emcsOnSchool=Object(c["a"])(a.data.emcsOnSchool),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},detachEMCFrom:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.detachFrom(t.$route.params,e.emcId);case 3:n=a.sent,t.emcsOnSchool=Object(c["a"])(n.data.emcsOnSchool),t.getEMCs(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.error=a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},swapApprovingStatusEMCOnSchool:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.setEMCOnSchool(Object(r["a"])(Object(r["a"])({},e),{},{isApproved:!e.isApproved}));case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},na=aa,oa=Object(b["a"])(na,Bt,Nt,!1,null,"3b1b1a8a",null),ra=oa.exports;f()(oa,{VCard:Ue["a"],VCol:U["a"],VContainer:K["a"],VRow:N["a"]});var ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),a("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"pmo-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},sa=[],ia={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCForEdit()},methods:{getEMCForEdit:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getEMCs(e.$route.params);case 3:a=t.sent,void 0===a.data.error?(n=Object(bt["a"])(a.data.emcs,1),o=n[0],e.emc=o):e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.setEMC(Object(r["a"])(Object(r["a"])({},e.emc),{},{publisherId:e.emc.Publisher.id,levelId:e.emc.Level.id,subjectId:e.emc.Subject.id}));case 3:a=t.sent,e.$store.dispatch("updateEMC",a.data.emc),e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:a.data.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},la=ia,ua=Object(b["a"])(la,ca,sa,!1,null,null,null),da=ua.exports;f()(ua,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VContainer:K["a"],VSelect:xt["a"],VSpacer:g["a"],VTextField:de["a"]});var ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"pmo-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},va=[],ha={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,It.createEMC(e.emc);case 5:e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},pa=ha,ba=Object(b["a"])(pa,ma,va,!1,null,null,null),Ca=ba.exports;f()(ba,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VContainer:K["a"],VSelect:xt["a"],VTextField:de["a"]});var fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-create"}}},[e._v(" Создать УМК ")])],1),a("v-col",{attrs:{cols:"12"}},[0==e.emcsFilteredForPMO.length?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету нету ")]):e._e()],1),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsFilteredForPMO,(function(t){return a("v-card",{key:t.id},[a("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom&&t.createdBy===e.user.id,expression:"emc.isCustom && emc.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Созданный вами ")])],1),a("p",[a("strong",[e._v("Издательство: ")]),e._v(" "+e._s(t.Publisher.name))]),a("p",[a("strong",[e._v("Авторы: ")]),e._v(" "+e._s(t.authors))]),a("p",[a("strong",[e._v("Класс: ")]),e._v(" "+e._s(t.grades))]),a("p",[a("strong",[e._v("Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных"))]),9==t.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),a("v-card-actions",[t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]):e._e(),a("v-spacer"),t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(a){return e.deleteEMC(t)}}},[e._v(" Удалить ")]):e._e()],1)],1)})),1)],1):e._e()},Sa=[],xa={data:function(){return{error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["isSignin","user","emcs"])),{},{emcsFilteredForPMO:function(){var e=this;return this.emcs.filter((function(t){return t.isCustom&&t.createdBy===e.user.id}))}}),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getEMCs(e.$route.params);case 3:a=t.sent,e.$store.commit("setEMCs",a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteEMC:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,It.deleteEMC(e);case 3:n=a.sent,200===n.status&&t.$store.dispatch("deleteEMC",e),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},Oa=xa,ga=Object(b["a"])(Oa,fa,Sa,!1,null,null,null),_a=ga.exports;f()(ga,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VChip:Ye["a"],VCol:U["a"],VRow:N["a"],VSpacer:g["a"]});var ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-row",[a("v-col",[e._v(" POO ")])],1):e._e()},Ea=[],wa={getUserData:function(){return ce().get("/poo")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().get("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().get("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return ce().put("/poo/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().delete("/poo/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return ce().put("/poo/emcOnSchool/".concat(e.id),e)},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ce().post("/poo/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return ce().post("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"),a)},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ce().delete("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}},Ma={computed:Object(r["a"])({},Object(s["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.getUserData();case 3:a=t.sent,e.$store.dispatch("setAreas",a.data.areasAndSchools),e.$store.dispatch("setSubjects",a.data.subjects),e.$store.dispatch("setPublishers",a.data.publishers),e.$store.dispatch("setLevels",a.data.levels),e.$store.dispatch("setEMCs",a.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},ka=Ma,Va=Object(b["a"])(ka,ja,Ea,!1,null,"55ef062e",null),$a=Va.exports;f()(Va,{VCol:U["a"],VRow:N["a"]});var Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-container",{attrs:{fluid:""}},[e.$route.params.subjectCode?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"text-center"},[e._v(e._s(e.subjectTitle))])])],1):e._e(),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?a("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==e.$route.params.schoolCode?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsOnSchool,(function(t){return a("v-row",{key:t.id},[a("EMCOnSchoolCard",{attrs:{"emc-on-school":t},on:{onDetachEMCFrom:e.detachEMCFrom}})],1)})),1)],1)],1):e._e()},Ra=[],Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",{attrs:{disabled:e.emcOnSchool.isApproved}},[a("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(e.emcOnSchool.EMC.title))]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Утверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:!e.emcOnSchool.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не утверждено ")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id,expression:"emcOnSchool.EMC.isCustom && emcOnSchool.EMC.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Создано вами ")]),9==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e(),11==e.emcOnSchool.EMC.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(e.emcOnSchool.EMC.gia)+" ")]):e._e()],1),a("p",[a("strong",[e._v("Издательство:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Publisher.publisherName))]),a("p",[a("strong",[e._v("Авторы:")]),e._v(" "+e._s(e.emcOnSchool.EMC.authors))]),a("p",[a("strong",[e._v("Класс:")]),e._v(" "+e._s(e.emcOnSchool.EMC.grades))]),a("p",[a("strong",[e._v("Кол-во учеников:")]),e._v(" "+e._s(e.emcOnSchool.studentsCount))]),a("p",[a("strong",[e._v("Уровень:")]),e._v(" "+e._s(e.emcOnSchool.EMC.Level?e.emcOnSchool.EMC.Level.name:"Нет данных")+" ")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),e.emcOnSchool.EMC.isCustom&&e.emcOnSchool.EMC.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:e.emcOnSchool.emcId}}}},[e._v(" Редактировать ")]):e._e(),a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.$emit("onDetachEMCFrom",e.emcOnSchool)}}},[e._v(" Открепить УМК ")])],1),a("v-expand-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[a("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Кол-во учеников")]),a("v-tab",[e._v("Причина использования")]),a("v-tab",[e._v("Причина изменения")]),a("v-tab",[e._v("Причина смены")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Кол-во учеников",additionalEOSDataValue:e.emcOnSchool.studentsCount,isNumber:!0},on:{onSaveAdditionalData:e.saveStudentsCount}}),e._v(" "+e._s(e.emcOnSchool.studentsCount))],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина использования",additionalEOSDataValue:e.emcOnSchool.usingCoz},on:{onSaveAdditionalData:e.saveUsingCozComment}}),e._v(" "+e._s(e.emcOnSchool.usingCoz)+" ")],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина изменения",additionalEOSDataValue:e.emcOnSchool.correctionCoz},on:{onSaveAdditionalData:e.saveCorrectionCozComment}}),e._v(" "+e._s(e.emcOnSchool.correctionCoz))],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("TheEditAdditionalEOSData",{attrs:{additionalEOSTitle:"Причина смены",additionalEOSDataValue:e.emcOnSchool.swapCoz},on:{onSaveAdditionalData:e.saveSwapCozComment}}),e._v(" "+e._s(e.emcOnSchool.swapCoz))],1)],1)],1)],1)],1)],1)],1)],1)},Aa=[],Fa={components:{TheEditAdditionalEOSData:qe},props:{emcOnSchool:{type:Object,default:null}},data:function(){return{error:null,tab:null,isDetailing:!1}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","emcs","emcsOnSchool"])),methods:{saveUsingCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,wa.setEMCOnSchool({id:t.emcOnSchool.id,usingCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveCorrectionCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,wa.setEMCOnSchool({id:t.emcOnSchool.id,correctionCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveSwapCozComment:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,wa.setEMCOnSchool({id:t.emcOnSchool.id,swapCoz:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveStudentsCount:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,wa.setEMCOnSchool({id:t.emcOnSchool.id,studentsCount:e});case 3:n=a.sent,t.$store.dispatch("updateEMCOnSchool",n.data.emcOnSchool),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},ya=Fa,Ia=(a("9e83"),Object(b["a"])(ya,Ta,Aa,!1,null,"276860d6",null)),za=Ia.exports;f()(Ia,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VChip:Ye["a"],VContainer:K["a"],VExpandTransition:Ke["a"],VTab:Qe["a"],VTabItem:We["a"],VTabs:Xe["a"],VTabsItems:Ze["a"]});var La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",rounded:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.emc.previewData["Название"]))]),a("v-list-item-subtitle",[a("p",[e._v(" Авторы: "+e._s(t.item.emc.previewData["Авторы"])+"; Издатель: "+e._s(t.item.emc.previewData["Издатель"])+"; Классы: "+e._s(t.item.emc.previewData["Классы"])+" ")])])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),a("v-expand-transition",[e.model?a("v-list",[e._l(e.fields,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),a("v-list-item",[a("v-text-field",{attrs:{type:"number",label:"Количество учеников"},model:{value:e.additionalDataForEMCOnSchool.studentsCount,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"studentsCount",t)},expression:"additionalDataForEMCOnSchool.studentsCount"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины использования"},model:{value:e.additionalDataForEMCOnSchool.usingCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"usingCoz",t)},expression:"additionalDataForEMCOnSchool.usingCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Причины смены"},model:{value:e.additionalDataForEMCOnSchool.swapCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"swapCoz",t)},expression:"additionalDataForEMCOnSchool.swapCoz"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"Планируемая корректировка"},model:{value:e.additionalDataForEMCOnSchool.correctionCoz,callback:function(t){e.$set(e.additionalDataForEMCOnSchool,"correctionCoz",t)},expression:"additionalDataForEMCOnSchool.correctionCoz"}})],1)],2):e._e()],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)},Pa=[],Ua={data:function(){return{model:null,additionalDataForEMCOnSchool:{swapCoz:null,usingCoz:null,correctionCoz:null,studentsCount:0},descriptionLimit:200,error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["emcs","emcsOnSchool","user"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,a){if(a&&a.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===a.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var n=a.title.concat(". ")+a.authors.concat(". ")+a.Publisher.name,o=n.length>e.descriptionLimit?n.slice(0,e.descriptionLimit).concat("..."):n,r=[];r.previewData={},r.previewData["Название"]=a.title,r.previewData["Авторы"]=a.authors,r.previewData["Издатель"]=a.Publisher.name,r.previewData["Предмет"]=a.Subject.name,r.previewData["Классы"]=a.grades,r.previewData["Уровень"]=a.Level.name,r.previewData["Создана вами"]=a.createdBy===e.user.id?"Да":"Нет",r.entry=a,t.push({Description:o,emc:r})}return t}),[])}}),watch:{$route:function(){this.model=null,this.getEMCs()}},created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(c["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.attachTo(e.$route.params,e.model.entry.id,Object(r["a"])({},e.additionalDataForEMCOnSchool));case 3:a=t.sent,e.emcsOnSchool=Object(c["a"])(a.data.emcsOnSchool),e.model=null,e.getEMCs(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},Ba=Ua,Na=Object(b["a"])(Ba,La,Pa,!1,null,null,null),Ga=Na.exports;f()(Na,{VAutocomplete:ct["a"],VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VCol:U["a"],VExpandTransition:Ke["a"],VIcon:$["a"],VList:st["a"],VListItem:D["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"],VSpacer:g["a"],VTextField:de["a"]});var qa={components:{EMCOnSchoolCard:za,EMCOnSchoolSelector:Ga},data:function(){return{error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["emcsOnSchool","isSignin","user","emcs","subjects"])),{},{subjectTitle:function(){var e=this;return this.subjects.find((function(t){return t.code===e.$route.params.subjectCode})).name}}),watch:{$route:function(){this.getEMCsOnSchool()}},created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},methods:{getEMCs:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.getEMCs(e.$route.params);case 3:a=t.sent,e.emcs=Object(c["a"])(a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEMCsOnSchool:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.getEMCsOnSchool(e.$route.params);case 3:a=t.sent,e.emcsOnSchool=Object(c["a"])(a.data.emcsOnSchool),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},detachEMCFrom:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,wa.detachFrom(t.$route.params,e.emcId);case 3:n=a.sent,t.emcsOnSchool=Object(c["a"])(n.data.emcsOnSchool),t.getEMCs(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.error=a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},Ha=qa,Ja=Object(b["a"])(Ha,Da,Ra,!1,null,"dfd86fc8",null),Ya=Ja.exports;f()(Ja,{VCard:Ue["a"],VCol:U["a"],VContainer:K["a"],VRow:N["a"]});var Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),a("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"poo-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},Qa=[],Wa={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCForEdit()},methods:{getEMCForEdit:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.getEMCs(e.$route.params);case 3:a=t.sent,200===a.status?(n=Object(bt["a"])(a.data.emcs,1),o=n[0],console.log("response: ",o),e.emc=o):e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.setEMC(Object(r["a"])(Object(r["a"])({},e.emc),{},{publisherId:e.emc.Publisher.id,levelId:e.emc.Level.id,subjectId:e.emc.Subject.id}));case 3:a=t.sent,e.$store.dispatch("updateEMC",a.data.emc),e.$router.push({name:"poo-subject-emcs",params:{subjectCode:a.data.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Xa=Wa,Za=Object(b["a"])(Xa,Ka,Qa,!1,null,null,null),en=Za.exports;f()(Za,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VContainer:K["a"],VSelect:xt["a"],VSpacer:g["a"],VTextField:de["a"]});var tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-container",{staticClass:"px-0",attrs:{fluid:""}},[a("v-card",[a("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),a("v-card-text",{staticClass:"text-h5"},[a("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),a("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),a("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),a("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),a("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),a("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),a("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"poo-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},an=[],nn={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(r["a"])({},Object(i["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,wa.createEMC(e.emc);case 5:e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},on=nn,rn=Object(b["a"])(on,tn,an,!1,null,null,null),cn=rn.exports;f()(rn,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VContainer:K["a"],VSelect:xt["a"],VTextField:de["a"]});var sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"poo-emc-create"}}},[e._v(" Создать УМК ")])],1),a("v-col",{attrs:{cols:"12"}},[0===e.emcsFilteredForPOO.length?a("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету созданных вами нету ")]):e._e()],1),a("v-col",{attrs:{cols:"12"}},e._l(e.emcsFilteredForPOO,(function(t){return a("v-card",{key:t.id},[a("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title))]),a("v-card-text",{staticClass:"text-h5"},[a("div",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom&&t.createdBy===e.user.id,expression:"emc.isCustom && emc.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Созданный вами ")])],1),a("p",[a("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name))]),a("p",[a("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors))]),a("p",[a("strong",[e._v(" Класс:")]),e._v(" "+e._s(t.grades))]),a("p",[a("strong",[e._v(" Уровень:")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных"))]),9==t.gia?a("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),a("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),a("v-card-actions",[t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"poo-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]):e._e(),a("v-spacer"),t.isCustom&&t.createdBy===e.user.id?a("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(a){return e.deleteEMC(t)}}},[e._v(" Удалить ")]):e._e()],1)],1)})),1)],1):e._e()},ln=[],un={data:function(){return{error:null}},computed:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["isSignin","user","emcs"])),{},{emcsFilteredForPOO:function(){var e=this;return this.emcs.filter((function(t){return t.isCustom&&t.createdBy===e.user.id}))}}),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(ne["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wa.getEMCs(e.$route.params);case 3:a=t.sent,e.$store.dispatch("setEMCs",a.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteEMC:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,wa.deleteEMC(e);case 3:n=a.sent,200===n.status&&t.$store.dispatch("deleteEMC",e),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},dn=un,mn=Object(b["a"])(dn,sn,ln,!1,null,null,null),vn=mn.exports;f()(mn,{VBtn:x["a"],VCard:Ue["a"],VCardActions:Be["a"],VCardText:Be["b"],VCardTitle:Be["c"],VChip:Ye["a"],VCol:U["a"],VRow:N["a"],VSpacer:g["a"]}),n["a"].use(ee["a"]);var hn=function(e,t,a){l.state.isSignin&&1===l.state.user.UserRole.code?a():a("/")},pn=function(e,t,a){l.state.isSignin&&2===l.state.user.UserRole.code?a():a("/")},bn=function(e,t,a){l.state.isSignin&&3===l.state.user.UserRole.code?a():a("/")},Cn=new ee["a"]({mode:"history",routes:[{path:"/",name:"/",component:Se},{path:"/signup",name:"signup",component:ve},{path:"/admin",name:"main-admin",component:Re,beforeEnter:hn},{name:"admin-emcs-on-school-index",path:"/admin/emcs-on-school",component:vt,beforeEnter:hn},{name:"admin-emcs-on-school",path:"/admin/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:vt,beforeEnter:hn},{name:"admin-emcs",path:"/admin/emcs",component:At,beforeEnter:hn},{name:"admin-subject-emcs",path:"/admin/subjects/:subjectCode/emcs",component:At,beforeEnter:hn},{name:"admin-emc-create",path:"/admin/emcs/create",component:kt,beforeEnter:hn},{name:"admin-emc-edit",path:"/admin/emcs/:emcId/edit",component:gt,beforeEnter:hn},{path:"/pmo",name:"main-pmo",component:Ut,beforeEnter:pn},{name:"pmo-emcs-on-school-index",path:"/pmo/emcs-on-school",component:ra,beforeEnter:pn},{name:"pmo-emcs-on-school",path:"/pmo/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:ra,beforeEnter:pn},{name:"pmo-emcs",path:"/pmo/emcs",component:_a,beforeEnter:pn},{name:"pmo-subject-emcs",path:"/pmo/subjects/:subjectCode/emcs",component:_a,beforeEnter:pn},{name:"pmo-emc-create",path:"/pmo/emcs/create",component:Ca,beforeEnter:pn},{name:"pmo-emc-edit",path:"/pmo/emcs/:emcId/edit",component:da,beforeEnter:pn},{path:"/poo",name:"main-poo",component:$a,beforeEnter:bn},{name:"poo-emcs-on-school-index",path:"/poo/emcs-on-school",component:Ya,beforeEnter:bn},{name:"poo-emcs-on-school",path:"/poo/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:Ya,beforeEnter:bn},{name:"poo-emcs",path:"/poo/emcs",component:vn,beforeEnter:bn},{name:"poo-subject-emcs",path:"/poo/subjects/:subjectCode/emcs",component:vn,beforeEnter:bn},{name:"poo-emc-create",path:"/poo/emcs/create",component:cn,beforeEnter:bn},{name:"poo-emc-edit",path:"/poo/emcs/:emcId/edit",component:en,beforeEnter:bn},{path:"*",component:Ee}]}),fn=a("f309");a("5363");n["a"].use(fn["a"]);var Sn=new fn["a"]({});n["a"].config.productionTip=!1,Object(o["sync"])(l,Cn),new n["a"]({store:l,router:Cn,vuetify:Sn,render:function(e){return e(Z)}}).$mount("#app")},"67ff":function(e,t,a){},"6a44":function(e,t,a){"use strict";a("d01c")},"9e83":function(e,t,a){"use strict";a("bedc")},bedc:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.18cb333b.png"},d01c:function(e,t,a){},ee2d:function(e,t,a){"use strict";a("67ff")}});
//# sourceMappingURL=app.c3368944.js.map