(function(e){function t(t){for(var a,s,o=t[0],i=t[1],l=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&m.push(c[s][0]),c[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var i=r[o];0!==c[i]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},c={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=i;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1d44":function(e,t,r){},"4a34":function(e,t,r){"use strict";r("1d44")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),c=r("31bd"),n=r("2909"),s=(r("c740"),r("a434"),r("2f62")),o=r("5935");a["a"].use(s["a"]);var i=new s["a"].Store({strict:!0,state:{user:null,token:null,isSignin:!1,isSubjectsSidebar:!1,isAreasSidebar:!1,publishers:[],subjects:[],areas:[],levels:[],emcs:[],emcsOnSchool:[]},mutations:{updateField:o["c"],setToken:function(e,t){e.token=t,e.isSignin=!!t},setUser:function(e,t){e.user=t},setSubjectsSidebar:function(e,t){e.isSubjectsSidebar=t},setAreasSidebar:function(e,t){e.isAreasSidebar=t},setPublishers:function(e,t){e.publishers=t},setSubjects:function(e,t){e.subjects=t},setAreas:function(e,t){e.areas=t},setLevels:function(e,t){e.levels=t},setEMCs:function(e,t){e.emcs=t,e.emcs=Object(n["a"])(e.emcs)},updateEMC:function(e,t){var r=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==r&&(console.log("before mutate: ",e.emcs[r]),e.emcs.splice(r,0,t),console.log("after mutate: ",e.emcs[r])),e.emcs=Object(n["a"])(e.emcs)},createEMC:function(e,t){t.publisherId=t.Publisher.id,t.levelId=t.Level.id,t.subjectId=t.Subject.id,console.log("mutating emc ",t),e.emcs.push(t),e.emcs=Object(n["a"])(e.emcs)},deleteEMC:function(e,t){var r=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==r&&e.emcs.splice(r,1),e.emcs=Object(n["a"])(e.emcs)},updateEMCOnSchoolApproval:function(e,t){var r=e.emcsOnSchool.findIndex((function(e){return e.id===t.id}));console.log("index emcOnSchoolToChange in store: ",e.emcsOnSchool.findIndex((function(e){return e.id===t.id}))),console.log("emcOnSchool ",t),-1!==r&&(e.emcsOnSchool[r].isApproved=!e.emcsOnSchool[r].isApproved),console.log("state.emcsOnSchool: ",e.emcsOnSchool),e.emcsOnSchool=Object(n["a"])(e.emcsOnSchool)},swapCreatingStatus:function(e,t){var r=e.emcs.findIndex((function(e){return e.id===t.id}));-1!==r&&null===!e.emcs[r].createdBy&&(e.emcs[r].isCustom=!e.emcs[r].isCustom),e.emcs=Object(n["a"])(e.emcs)}},actions:{setToken:function(e,t){var r=e.commit;r("setToken",t)},setUser:function(e,t){var r=e.commit;r("setUser",t)},setSubjectsSidebar:function(e,t){var r=e.commit;r("setSubjectsSidebar",t)},setAreasSidebar:function(e,t){var r=e.commit;r("setAreasSidebar",t)},setPublishers:function(e,t){var r=e.commit;r("setPublishers",t)},setSubjects:function(e,t){var r=e.commit;r("setSubjects",t)},setAreas:function(e,t){var r=e.commit;r("setAreas",t)},setLevels:function(e,t){var r=e.commit;r("setLevels",t)},setEMCs:function(e,t){var r=e.commit;r("setEMCs",t)},updateEMCOnSchoolApproval:function(e,t){var r=e.commit;r("updateEMCOnSchoolApproval",t)},updateEMCOnSchool:function(e,t){var r=e.commit;r("updateEMCOnSchool",t)},updateEMC:function(e,t){var r=e.commit;console.log("commiting updateEMC"),r("updateEMC",t)},createEMC:function(e,t){var r=e.commit;console.log("commiting createEMC ",t),r("createEMC",t)},deleteEMC:function(e,t){var r=e.commit;r("deleteEMC",t)},swapCreatingStatusEMC:function(e,t){var r=e.commit;r("swapCreatingStatus",t)}},getters:{getField:o["a"]}}),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("PageHeader"),e.isAreasSidebar&&e.isSignin?r("TheSidebar",e._l(e.areas,(function(t){return r("v-list-group",{key:t.AreaID,attrs:{value:!1,"prepend-icon":"mdi-account-circle"},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-title",[e._v(e._s(t.name))])]},proxy:!0}],null,!0)},e._l(t.Schools,(function(a){return r("v-list-group",{key:a.id,attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-content",[r("v-list-item-title",{attrs:{blue:""}},[e._v(e._s(a.code)+" "+e._s(a.name)+" ")])],1)]},proxy:!0}],null,!0)},e._l(e.subjects,(function(c){return r("v-list-item",{key:c.SubjectGlobalID,attrs:{value:!1,link:""}},[r("v-list-item-content",[1==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"admin-emcs-on-school",params:{areaCode:t.code,schoolCode:a.code,subjectCode:c.code}}}},[e._v(" "+e._s(c.name)+" ")]):e._e(),2==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs-on-school",params:{areaCode:t.code,schoolCode:a.code,subjectCode:c.code}}}},[e._v(" "+e._s(c.name)+" ")]):e._e(),3==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"poo-emcs-on-school",params:{areaCode:t.code,schoolCode:a.code,subjectCode:c.code}}}},[e._v(" "+e._s(c.name)+" ")]):e._e()],1)],1)})),1)})),1)})),1):e._e(),e.isSubjectsSidebar&&e.isSignin?r("TheSidebar",e._l(e.subjects,(function(t){return r("v-list-item",{key:t.SubjectGlobalID,attrs:{value:!1,link:""}},[r("v-list-item-content",[1==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"admin-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),2==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"pmo-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),3==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"poo-subject-emcs",params:{subjectCode:t.code}}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)],1)})),1):e._e(),r("v-main",[r("v-container",{attrs:{fluid:""}},[r("router-view")],1)],1)],1)},u=[],d=r("5530"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app-bar",{attrs:{app:"",color:"primary",dark:"","clipped-left":""}},[r("div",{staticClass:"d-flex align-center"},[r("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}})],1),e.isSignin?e._e():r("v-btn",{attrs:{plain:"",to:{name:"/"}}},[e._v(" Система учёта УМК ")]),e.isSignin?r("div",[r("v-btn",{attrs:{plain:"",to:{path:"/"+e.user.UserRole.name}}},[e._v(" Система учёта УМК ")]),1==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"admin-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),1==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"admin-emcs"}}},[e._v(" Конструктор ")]):e._e(),2==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),2==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"pmo-emcs"}}},[e._v(" Конструктор ")]):e._e(),3==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"poo-emcs-on-school-index"}}},[e._v(" УМК ")]):e._e(),3==e.user.UserRole.code?r("v-btn",{attrs:{plain:"",to:{name:"poo-emcs"}}},[e._v(" Конструктор ")]):e._e()],1):e._e(),r("v-spacer"),e.isSignin?r("v-btn",{attrs:{plain:"",to:{path:"/"+e.user.UserRole.name}}},[e._v(" "+e._s(e.user.username))]):e._e(),e.isSignin?r("v-btn",{attrs:{plain:""},on:{click:e.signout}},[e._v(" Выход ")]):e._e(),e.isSignin?e._e():r("v-btn",{attrs:{plain:"",to:{name:"/"}}},[e._v(" Войти ")]),e.isSignin?e._e():r("v-btn",{attrs:{plain:"",to:{name:"signup"}}},[e._v(" Регистрация ")])],1)},v=[],p={computed:Object(d["a"])({},Object(s["b"])(["isSignin","user"])),methods:{signout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"/"})}}},h=p,b=r("2877"),C=r("6544"),f=r.n(C),g=r("40dc"),x=r("8336"),_=r("adda"),j=r("2fa4"),S=Object(b["a"])(h,m,v,!1,null,null,null),w=S.exports;f()(S,{VAppBar:g["a"],VBtn:x["a"],VImg:_["a"],VSpacer:j["a"]});var E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-navigation-drawer",{attrs:{app:"",width:"20%",left:"true",permanent:"",absolute:"",clipped:""}},[r("v-list-item",[r("v-list-item-content",[r("v-list-item-icon",[r("v-icon",[e._v("mdi-home")])],1),r("v-list-item-title",[e._v(" МО")]),r("v-list-item-subtitle",[e._v("subtext ")])],1)],1),r("v-divider"),e._t("default",(function(){return[e._v(" Нет данных ")]}))],2)},O=[],M={},k=M,$=r("ce7e"),V=r("132d"),R=r("da13"),y=r("5d23"),A=r("34c3"),D=r("f774"),L=Object(b["a"])(k,E,O,!1,null,"0f5fa411",null),T=L.exports;f()(L,{VDivider:$["a"],VIcon:V["a"],VListItem:R["a"],VListItemContent:y["a"],VListItemIcon:A["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"],VNavigationDrawer:D["a"]});var I={name:"App",components:{PageHeader:w,TheSidebar:T},data:function(){return{err:null}},computed:Object(d["a"])({},Object(s["b"])(["isSignin","user","isSubjectsSidebar","isAreasSidebar","subjects","areas"]))},P=I,F=r("7496"),U=r("a523"),B=r("56b0"),N=r("f6c4"),z=Object(b["a"])(P,l,u,!1,null,null,null),G=z.exports;f()(z,{VApp:F["a"],VBtn:x["a"],VContainer:U["a"],VListGroup:B["a"],VListItem:R["a"],VListItemContent:y["a"],VListItemTitle:y["c"],VMain:N["a"]});var q=r("8c4f"),H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"d-flex justify-center"},[r("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"3"}},[r("v-form",[r("v-text-field",{attrs:{type:"username",name:"username",autocomplete:"off",maxlength:"20"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{autocomplete:"off",type:"password",name:"input-10-1",label:"Normal with hint text",hint:"At least 8 characters"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-btn",{on:{click:e.signup}},[e._v(" Зарегистрироваться ")])],1)],1)],1)},J=[],K=r("1da1"),Q=(r("96cf"),r("bc3a")),W=r.n(Q),X=function(){return W.a.create({baseURL:"https://umk.coko38.ru/",headers:{Authorization:"Bearer ".concat(i.state.token)}})},Y={signup:function(e){return X().post("signup",e)},signin:function(e){return X().post("signin",e)}},Z={data:function(){return{username:"Введите логин",password:"Пароль"}},methods:{signup:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Y.signup({username:e.username,password:e.password});case 2:case"end":return t.stop()}}),t)})))()}}},ee=Z,te=r("62ad"),re=r("4bd4"),ae=r("0fd9"),ce=r("8654"),ne=Object(b["a"])(ee,H,J,!1,null,"1f71653f",null),se=ne.exports;f()(ne,{VBtn:x["a"],VCol:te["a"],VForm:re["a"],VRow:ae["a"],VTextField:ce["a"]});var oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"d-flex justify-center"},[r("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"3"}},[r("v-form",[r("v-text-field",{attrs:{type:"username",name:"username",maxlength:"20",placeholder:"Введите логин",require:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{type:"password",name:"input-10-1",label:"Введите пароль",placeholder:"Введите пароль",hint:"Как минимум 8 символов",require:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-btn",{on:{click:e.signin}},[e._v(" Войти ")])],1)],1)],1)},ie=[],le={data:function(){return{username:"",password:"",error:null}},methods:{signin:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.signin({username:e.username,password:e.password});case 3:r=t.sent,console.log(r),e.$store.dispatch("setToken",r.data.token),e.$store.dispatch("setUser",r.data.user),1===e.$store.state.user.UserRole.code?e.$router.push("/admin"):2===e.$store.state.user.UserRole.code?e.$router.push("/pmo"):3===e.$store.state.user.UserRole.code&&e.$router.push("/poo"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},ue=le,de=Object(b["a"])(ue,oe,ie,!1,null,"28fd1177",null),me=de.exports;f()(de,{VBtn:x["a"],VCol:te["a"],VForm:re["a"],VRow:ae["a"],VTextField:ce["a"]});var ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center align-center"},[e._v("Страница не найдена")])},pe=[],he={},be=he,Ce=Object(b["a"])(be,ve,pe,!1,null,null,null),fe=Ce.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?r("v-row",[r("v-col",[e._v(" Admin ")])],1):e._e()},xe=[],_e=(r("99af"),{getUserData:function(){return X().get("/admin")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().get("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().get("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return X().put("/admin/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().delete("/admin/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return console.log("EMCOnSchool:",Object(d["a"])({},e)),X().put("/admin/emcOnSchool/".concat(e.id),Object(d["a"])({},e))},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().post("/admin/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return X().post("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"))},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return X().delete("/admin\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}}),je={computed:Object(d["a"])({},Object(s["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.getUserData();case 3:r=t.sent,e.$store.dispatch("setAreas",r.data.areasAndSchools),e.$store.dispatch("setSubjects",r.data.subjects),e.$store.dispatch("setPublishers",r.data.publishers),e.$store.dispatch("setLevels",r.data.levels),e.$store.dispatch("setEMCs",r.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},Se=je,we=Object(b["a"])(Se,ge,xe,!1,null,"46114a94",null),Ee=we.exports;f()(we,{VCol:te["a"],VRow:ae["a"]});var Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?r("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?r("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),r("v-col",{attrs:{cols:"12"}},[r("EMCOnSchoolCard",{on:{onDetachEMCFrom:e.detachEMCFrom,onSwapApprovingStatusEMCOnSchool:e.swapApprovingStatusEMCOnSchool}})],1)],1):e._e()},Me=[],ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"px-0",attrs:{fluid:""}},e._l(e.emcsOnSchool,(function(t){return r("v-card",{key:t.id},[r("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(t.EMC.title)+" ")]),r("v-card-text",{staticClass:"text-h5"},[r("div",[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Подтверждено ")]),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:!t.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не подтверждено ")]),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.EMC.isCustom,expression:"emcOnSchool.EMC.isCustom"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Пользовательский ")])],1),r("p",[r("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.EMC.Publisher.publisherName)+" ")]),r("p",[r("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.EMC.authors)+" ")]),r("p",[e._v(" Класс: "+e._s(t.EMC.grades)+" ")]),r("p",[e._v(" ГИА-"+e._s(t.EMC.gia)+" ")]),r("p",[e._v(" Уровень: "+e._s(t.EMC.Level?t.EMC.Level.name:"Нет данных")+" ")])]),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(r){return e.$emit("onSwapApprovingStatusEMCOnSchool",t)}}},[e._v(" "+e._s(t.isApproved?"Отменить утверждение":"Утвердить")+" ")]),r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-edit",params:{emcId:t.emcId}}}},[e._v(" Редактировать ")]),r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(r){return e.$emit("onDetachEMCFrom",t)}}},[e._v(" Открепить УМК ")])],1),r("v-expand-transition",[r("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[r("v-card-text",{staticClass:"pb-0"},[r("p",[r("strong",[e._v("Причина исползования:")]),e._v(" "+e._s(t.usingCoz))]),r("p",[r("strong",[e._v("Причина изменений:")]),e._v(" "+e._s(t.correctionCoz)+" ")]),r("p",[r("strong",[e._v("Причина смены: ")]),e._v(" "+e._s(t.swapCoz)+" ")])])],1)],1)],1)})),1)},$e=[],Ve={data:function(){return{isDetailing:!1}},computed:Object(d["a"])({},Object(o["b"])(["emcsOnSchool","isSignin","user","emcs"]))},Re=Ve,ye=(r("4a34"),r("b0af")),Ae=r("99d9"),De=r("cc20"),Le=r("0789"),Te=Object(b["a"])(Re,ke,$e,!1,null,"f1ebe8f8",null),Ie=Te.exports;f()(Te,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VChip:De["a"],VContainer:U["a"],VExpandTransition:Le["a"]});var Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),r("v-card-text",[r("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",rounded:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),r("v-card-actions",[r("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1),r("v-divider"),r("v-expand-transition",[e.model?r("v-list",e._l(e.fields,(function(t,a){return r("v-list-item",{key:a},[r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),1):e._e()],1)],1)},Fe=[],Ue=(r("d81d"),r("b64b"),r("4de4"),r("b0c0"),r("fb6a"),{data:function(){return{model:null,descriptionLimit:200,error:null}},watch:{$route:function(){this.model=null,this.getEMCs()}},computed:Object(d["a"])(Object(d["a"])({},Object(o["b"])(["emcs","emcsOnSchool"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,r){if(r&&r.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===r.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var a=r.title.concat(". ")+r.authors.concat(". ")+r.Publisher.name,c=a.length>e.descriptionLimit?a.slice(0,e.descriptionLimit).concat("..."):a,n=[];n.previewData={},n.previewData["Название"]=r.title,n.previewData["Авторы"]=r.authors,n.previewData["Издатель"]=r.Publisher.name,n.previewData["Предмет"]=r.Subject.name,n.previewData["Классы"]=r.grades,n.previewData["Уровень"]=r.gia,n.previewData["Пользовательская"]=r.isCustom?"Да":"Нет",n.entry=r,t.push({Description:c,emc:n})}return t}),[])}}),created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("get emcs"),t.next=4,_e.getEMCs(e.$route.params);case 4:r=t.sent,console.log("new emcs ",r.data.emcs),e.emcs=Object(n["a"])(r.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},attachEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.attachTo(e.$route.params,e.model.entry.id);case 3:r=t.sent,console.log("get response: ",r.data.emcsOnSchool),e.emcsOnSchool=r.data.emcsOnSchool,e.model=null,e.getEMCs(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}}),Be=Ue,Ne=r("c6a6"),ze=r("8860"),Ge=Object(b["a"])(Be,Pe,Fe,!1,null,null,null),qe=Ge.exports;f()(Ge,{VAutocomplete:Ne["a"],VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VDivider:$["a"],VExpandTransition:Le["a"],VIcon:V["a"],VList:ze["a"],VListItem:R["a"],VListItemContent:y["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"],VSpacer:j["a"]});var He={components:{EMCOnSchoolCard:Ie,EMCOnSchoolSelector:qe},data:function(){return{error:null}},computed:Object(d["a"])({},Object(o["b"])(["emcsOnSchool","isSignin","user","emcs"])),created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},watch:{$route:function(){this.getEMCsOnSchool()}},methods:{getEMCs:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("eos get emcs"),t.next=4,_e.getEMCs(e.$route.params);case 4:r=t.sent,console.log("eos new emcs ",r.data.emcs),e.emcs=Object(n["a"])(r.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getEMCsOnSchool:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.getEMCsOnSchool(e.$route.params);case 3:r=t.sent,console.log("eos school: ",e.$route.params.schoolCode,"; subject: ",e.$route.params.subjectCode,"; eos: ",r.data.emcsOnSchool),e.emcsOnSchool=r.data.emcsOnSchool,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},detachEMCFrom:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("eos detachEMCFrom"),r.next=4,_e.detachFrom(t.$route.params,e.emcId);case 4:a=r.sent,t.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),t.getEMCs(),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),t.error=r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},swapApprovingStatusEMCOnSchool:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("eos not from the store: ",e),t.$store.dispatch("updateEMCOnSchoolApproval",e),r.next=5,_e.setEMCOnSchool(e);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.error=r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},Je=He,Ke=Object(b["a"])(Je,Oe,Me,!1,null,"7ab4b428",null),Qe=Ke.exports;f()(Ke,{VCard:ye["a"],VCol:te["a"],VRow:ae["a"]});var We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?r("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?r("v-card",[r("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),r("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?r("v-card",[r("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),r("v-card-text",{staticClass:"text-h5"},[r("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),r("v-text-field",{attrs:{label:"Авторы",value:e.emc.authors}}),r("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),r("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),r("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),r("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),r("v-checkbox",{attrs:{label:"Пользовательский"},model:{value:e.emc.isCustom,callback:function(t){e.$set(e.emc,"isCustom",t)},expression:"emc.isCustom"}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"admin-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},Xe=[],Ye=r("3835"),Ze={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(d["a"])({},Object(o["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsForEdit()},methods:{getEMCsForEdit:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.getEMCs(e.$route.params);case 3:r=t.sent,200===r.status?(a=Object(Ye["a"])(r.data.emcs,1),c=a[0],console.log("response: ",c),e.emc=c):e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this.emc: ",e.emc),t.next=4,_e.setEMC(e.emc);case 4:e.$store.dispatch("updateEMC",e.emc),e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},et=Ze,tt=r("ac7c"),rt=r("b974"),at=Object(b["a"])(et,We,Xe,!1,null,null,null),ct=at.exports;f()(at,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VCheckbox:tt["a"],VContainer:U["a"],VSelect:rt["a"],VSpacer:j["a"],VTextField:ce["a"]});var nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?r("v-container",{staticClass:"px-0",attrs:{fluid:""}},[r("v-card",[r("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),r("v-card-text",{staticClass:"text-h5"},[r("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),r("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),r("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),r("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),r("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),r("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),r("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"admin-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},st=[],ot={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},computed:Object(d["a"])({},Object(o["b"])(["isSignin","user","publishers","subjects","levels"])),methods:{createEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,_e.createEMC(e.emc);case 5:e.$router.push({name:"admin-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},it=ot,lt=Object(b["a"])(it,nt,st,!1,null,null,null),ut=lt.exports;f()(lt,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VContainer:U["a"],VSelect:rt["a"],VTextField:ce["a"]});var dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&1==e.user.UserRole.code?r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-create"}}},[e._v(" Создать УМК ")])],1),r("v-col",{attrs:{cols:"12"}},[0===e.emcs.length?r("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету нету ")]):e._e()],1),r("v-col",{attrs:{cols:"12"}},e._l(e.emcs,(function(t){return r("v-card",{key:t.id},[r("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),r("v-card-text",{staticClass:"text-h5"},[r("div",[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom,expression:"emc.isCustom"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Пользовательский ")])],1),r("p",[r("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name)+" ")]),r("p",[r("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors)+" ")]),r("p",[r("strong",[e._v(" Класс: ")]),e._v(" "+e._s(t.grades)+" ")]),r("p",[r("strong",[e._v(" Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных")+" ")]),9==t.gia?r("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?r("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),r("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"admin-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]),t.createBy?r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){return e.swapCreatingStatusEMC("emc")}}},[t.isCustom?r("div",[e._v("Сделать официальным (не работает вроде)")]):r("div",[e._v("Сделать снова пользовательским (не работает вроде) ")])]):e._e(),r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(r){return e.deleteEMC(t)}}},[e._v(" Удалить ")])],1)],1)})),1)],1):e._e()},mt=[],vt={data:function(){return{error:null}},computed:Object(d["a"])({},Object(o["b"])(["isSignin","user","emcs"])),created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},watch:{$route:function(){this.getEMCsForConstructor()}},methods:{getEMCsForConstructor:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.getEMCs(e.$route.params);case 3:r=t.sent,e.$store.commit("setEMCs",r.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},swapCreatingStatusEMC:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{null!=e.createdBy&&t.$store.dispatch("swapCreatingStatusEMC",e)}catch(a){t.error=a}case 1:case"end":return r.stop()}}),r)})))()},deleteEMC:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("deleteEMC: ",e),r.next=4,_e.deleteEMC(e);case 4:a=r.sent,200===a.status&&t.$store.dispatch("deleteEMC",e),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.error=r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},pt=vt,ht=Object(b["a"])(pt,dt,mt,!1,null,null,null),bt=ht.exports;f()(ht,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VChip:De["a"],VCol:te["a"],VRow:ae["a"],VSpacer:j["a"]});var Ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?r("v-row",[r("v-col",[e._v(" PMO ")])],1):e._e()},ft=[],gt={getUserData:function(){return X().get("/pmo")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().get("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().get("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return console.log(e),X().put("/pmo/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().delete("/pmo/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return console.log("EMCOnSchool:",Object(d["a"])({},e)),X().put("/pmo/emcOnSchool/".concat(e.id),Object(d["a"])({},e))},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().post("/pmo/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return console.log("attachTo: ",e),X().post("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"))},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return X().delete("/pmo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}},xt={computed:Object(d["a"])({},Object(s["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.getUserData();case 3:r=t.sent,e.$store.dispatch("setAreas",r.data.areasAndSchools),e.$store.dispatch("setSubjects",r.data.subjects),e.$store.dispatch("setPublishers",r.data.publishers),e.$store.dispatch("setLevels",r.data.levels),e.$store.dispatch("setEMCs",r.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},_t=xt,jt=Object(b["a"])(_t,Ct,ft,!1,null,"578410e9",null),St=jt.exports;f()(jt,{VCol:te["a"],VRow:ae["a"]});var wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?r("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?r("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),r("v-col",{attrs:{cols:"12"}},[r("EMCOnSchoolCard",{on:{onDetachEMCFrom:e.detachEMCFrom,onSwapApprovingStatusEMCOnSchool:e.swapApprovingStatusEMCOnSchool}})],1)],1):e._e()},Et=[],Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"px-0",attrs:{fluid:""}},e._l(e.emcsOnSchool,(function(t){return r("v-card",{key:t.id},[r("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(t.EMC.title)+" ")]),r("v-card-text",{staticClass:"text-h5"},[r("div",[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Подтверждено ")]),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:!t.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не подтверждено ")]),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.EMC.isCustom&&t.EMC.createdBy===e.user.id,expression:"emcOnSchool.EMC.isCustom && emcOnSchool.EMC.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Создано вами ")])],1),r("p",[r("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.EMC.Publisher.publisherName)+" ")]),r("p",[r("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.EMC.authors)+" ")]),r("p",[e._v(" Класс: "+e._s(t.EMC.grades)+" ")]),r("p",[e._v(" ГИА-"+e._s(t.EMC.gia)+" ")]),r("p",[e._v(" Уровень: "+e._s(t.EMC.Level?t.EMC.Level.name:"Нет данных")+" ")])]),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(r){return e.$emit("onSwapApprovingStatusEMCOnSchool",t)}}},[e._v(" "+e._s(t.isApproved?"Отменить утверждение":"Утвердить")+" ")]),t.EMC.isCustom&&t.EMC.createdBy===e.user.id?r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:t.emcId}}}},[e._v(" Редактировать ")]):e._e(),r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(r){return e.$emit("onDetachEMCFrom",t)}}},[e._v(" Открепить УМК ")])],1),r("v-expand-transition",[r("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[r("v-card-text",{staticClass:"pb-0"},[r("p",[r("strong",[e._v("Причина исползования:")]),e._v(" "+e._s(t.usingCoz))]),r("p",[r("strong",[e._v("Причина изменений:")]),e._v(" "+e._s(t.correctionCoz)+" ")]),r("p",[r("strong",[e._v("Причина смены: ")]),e._v(" "+e._s(t.swapCoz)+" ")])])],1)],1)],1)})),1)},Mt=[],kt={data:function(){return{isDetailing:!1}},computed:Object(d["a"])({},Object(o["b"])(["emcsOnSchool","isSignin","user","emcs"]))},$t=kt,Vt=(r("636a"),Object(b["a"])($t,Ot,Mt,!1,null,"6f84a8be",null)),Rt=Vt.exports;f()(Vt,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VChip:De["a"],VContainer:U["a"],VExpandTransition:Le["a"]});var yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),r("v-card-text",[r("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",rounded:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),r("v-card-actions",[r("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1),r("v-divider"),r("v-expand-transition",[e.model?r("v-list",e._l(e.fields,(function(t,a){return r("v-list-item",{key:a},[r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),1):e._e()],1)],1)},At=[],Dt={data:function(){return{model:null,descriptionLimit:200,error:null}},watch:{$route:function(){this.model=null,this.getEMCs()}},computed:Object(d["a"])(Object(d["a"])({},Object(o["b"])(["emcs","emcsOnSchool"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,r){if(r&&r.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===r.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var a=r.title.concat(". ")+r.authors.concat(". ")+r.Publisher.name,c=a.length>e.descriptionLimit?a.slice(0,e.descriptionLimit).concat("..."):a,n=[];n.previewData={},n.previewData["Название"]=r.title,n.previewData["Авторы"]=r.authors,n.previewData["Издатель"]=r.Publisher.name,n.previewData["Предмет"]=r.Subject.name,n.previewData["Классы"]=r.grades,n.previewData["Уровень"]=r.gia,n.previewData["Пользовательская"]=r.isCustom?"Да":"Нет",n.entry=r,t.push({Description:c,emc:n})}return t}),[])}}),created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.getEMCs(e.$route.params);case 3:r=t.sent,e.emcs=Object(n["a"])(r.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.attachTo(e.$route.params,e.model.entry.id);case 3:r=t.sent,console.log("get response: ",r.data.emcsOnSchool),e.emcsOnSchool=Object(n["a"])(r.data.emcsOnSchool),e.model=null,e.getEMCs(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},Lt=Dt,Tt=Object(b["a"])(Lt,yt,At,!1,null,null,null),It=Tt.exports;f()(Tt,{VAutocomplete:Ne["a"],VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VDivider:$["a"],VExpandTransition:Le["a"],VIcon:V["a"],VList:ze["a"],VListItem:R["a"],VListItemContent:y["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"],VSpacer:j["a"]});var Pt={components:{EMCOnSchoolCard:Rt,EMCOnSchoolSelector:It},data:function(){return{error:null}},computed:Object(d["a"])({},Object(o["b"])(["emcsOnSchool","isSignin","user","emcs"])),created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},watch:{$route:function(){this.getEMCsOnSchool()}},methods:{getEMCs:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("eos get emcs"),t.next=4,gt.getEMCs(e.$route.params);case 4:r=t.sent,console.log("eos new emcs ",r.data.emcs),e.emcs=Object(n["a"])(r.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getEMCsOnSchool:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.getEMCsOnSchool(e.$route.params);case 3:r=t.sent,console.log("eos school: ",e.$route.params.schoolCode,"; subject: ",e.$route.params.subjectCode,"; eos: ",r.data.emcsOnSchool),e.emcsOnSchool=Object(n["a"])(r.data.emcsOnSchool),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},detachEMCFrom:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("eos detachEMCFrom"),r.next=4,gt.detachFrom(t.$route.params,e.emcId);case 4:a=r.sent,console.log("detachEMCFrom: ",a),t.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),t.getEMCs(),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),t.error=r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},swapApprovingStatusEMCOnSchool:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("eos not from the store: ",e),t.$store.dispatch("updateEMCOnSchoolApproval",e),r.next=5,gt.setEMCOnSchool(e);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.error=r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},Ft=Pt,Ut=Object(b["a"])(Ft,wt,Et,!1,null,"7964c748",null),Bt=Ut.exports;f()(Ut,{VCard:ye["a"],VCol:te["a"],VRow:ae["a"]});var Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?r("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?r("v-card",[r("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),r("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?r("v-card",[r("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),r("v-card-text",{staticClass:"text-h5"},[r("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),r("v-text-field",{attrs:{label:"Авторы"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),r("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),r("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),r("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),r("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"pmo-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},zt=[],Gt={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(d["a"])({},Object(o["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsForEdit()},methods:{getEMCsForEdit:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.getEMCs(e.$route.params);case 3:r=t.sent,200===r.status?(a=Object(Ye["a"])(r.data.emcs,1),c=a[0],console.log("response: ",c),e.emc=c):e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this.emc: ",e.emc),t.next=4,gt.setEMC(e.emc);case 4:e.$store.dispatch("updateEMC",e.emc),e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},qt=Gt,Ht=Object(b["a"])(qt,Nt,zt,!1,null,null,null),Jt=Ht.exports;f()(Ht,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VContainer:U["a"],VSelect:rt["a"],VSpacer:j["a"],VTextField:ce["a"]});var Kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?r("v-container",{staticClass:"px-0",attrs:{fluid:""}},[r("v-card",[r("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),r("v-card-text",{staticClass:"text-h5"},[r("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),r("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),r("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),r("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),r("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),r("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),r("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"pmo-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},Qt=[],Wt={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(d["a"])({},Object(o["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,gt.createEMC(e.emc);case 5:e.$router.push({name:"pmo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Xt=Wt,Yt=Object(b["a"])(Xt,Kt,Qt,!1,null,null,null),Zt=Yt.exports;f()(Yt,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VContainer:U["a"],VSelect:rt["a"],VTextField:ce["a"]});var er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&2==e.user.UserRole.code?r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-create"}}},[e._v(" Создать УМК ")])],1),r("v-col",{attrs:{cols:"12"}},[0==e.emcsFilteredForPMO.length?r("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету нету ")]):e._e()],1),r("v-col",{attrs:{cols:"12"}},e._l(e.emcsFilteredForPMO,(function(t){return r("v-card",{key:t.id},[r("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),r("v-card-text",{staticClass:"text-h5"},[r("div",[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom&&t.createdBy===e.user.id,expression:"emc.isCustom && emc.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Созданный вами ")])],1),r("p",[r("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name)+" ")]),r("p",[r("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors)+" ")]),r("p",[r("strong",[e._v(" Класс: ")]),e._v(" "+e._s(t.grades)+" ")]),r("p",[r("strong",[e._v(" Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных")+" ")]),9==t.gia?r("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?r("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),r("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),r("v-card-actions",[t.isCustom&&t.createdBy===e.user.id?r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]):e._e(),r("v-spacer"),t.isCustom&&t.createdBy===e.user.id?r("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(r){return e.deleteEMC(t)}}},[e._v(" Удалить ")]):e._e()],1)],1)})),1)],1):e._e()},tr=[],rr={data:function(){return{error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(o["b"])(["isSignin","user","emcs"])),{},{emcsFilteredForPMO:function(){var e=this;return this.emcs.filter((function(t){return t.isCustom&&t.createdBy===e.user.id}))}}),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.getEMCs(e.$route.params);case 3:r=t.sent,e.$store.commit("setEMCs",r.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteEMC:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,gt.deleteEMC(e);case 3:a=r.sent,200===a.status&&t.$store.dispatch("deleteEMC",e),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.error=r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},ar=rr,cr=Object(b["a"])(ar,er,tr,!1,null,null,null),nr=cr.exports;f()(cr,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VChip:De["a"],VCol:te["a"],VRow:ae["a"],VSpacer:j["a"]});var sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?r("v-row",[r("v-col",[e._v(" POO ")])],1):e._e()},or=[],ir={getUserData:function(){return X().get("/poo")},getEMCsOnSchool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().get("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs-on-school"))},getEMCs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().get("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs\n\t\t\t").concat(null!==e&&void 0!==e&&e.emcId?"/".concat(e.emcId):""))},setEMC:function(e){return X().put("/poo/emcs/".concat(e.id),e)},deleteEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().delete("/poo/emcs/".concat(e.id,"/delete"))},setEMCOnSchool:function(e){return X().put("/poo/emcOnSchool/".concat(e.id),e)},createEMC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return X().post("/poo/emcs/create",e)},attachTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return console.log("attachTo: ",e),X().post("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/attach"))},detachFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return X().delete("/poo\n\t\t\t".concat(null!==e&&void 0!==e&&e.areaCode?"/areas/".concat(e.areaCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.schoolCode?"/schools/".concat(e.schoolCode):"","\n\t\t\t").concat(null!==e&&void 0!==e&&e.subjectCode?"/subjects/".concat(e.subjectCode):"","\n\t\t\t/emcs/").concat(t,"/detach"))}},lr={computed:Object(d["a"])({},Object(s["b"])(["isSignin","user"])),created:function(){this.getUserData(),this.$store.dispatch("setSubjectsSidebar",!1),this.$store.dispatch("setAreasSidebar",!1)},methods:{getUserData:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ir.getUserData();case 3:r=t.sent,e.$store.dispatch("setAreas",r.data.areasAndSchools),e.$store.dispatch("setSubjects",r.data.subjects),e.$store.dispatch("setPublishers",r.data.publishers),e.$store.dispatch("setLevels",r.data.levels),e.$store.dispatch("setEMCs",r.data.emcs),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.err=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},ur=lr,dr=Object(b["a"])(ur,sr,or,!1,null,"55ef062e",null),mr=dr.exports;f()(dr,{VCol:te["a"],VRow:ae["a"]});var vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[e.$route.params.subjectCode?r("EMCOnSchoolSelector"):e._e()],1),0===e.emcsOnSchool.length&&void 0!==this.$route.params.schoolCode?r("v-card",{staticClass:"mx-auto text-center"},[e._v(" УМК у данного ОО отсутствует ")]):e._e(),r("v-col",{attrs:{cols:"12"}},[r("EMCOnSchoolCard",{on:{onDetachEMCFrom:e.detachEMCFrom}})],1)],1):e._e()},pr=[],hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"px-0",attrs:{fluid:""}},e._l(e.emcsOnSchool,(function(t){return r("v-card",{key:t.id},[r("v-card-title",{staticClass:"text-h4"},[e._v(" УМК: "+e._s(t.EMC.title)+" ")]),r("v-card-text",{staticClass:"text-h5"},[r("div",[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isApproved,expression:"emcOnSchool.isApproved"}],attrs:{color:"green","text-color":"white",pill:""}},[e._v(" Подтверждено ")]),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:!t.isApproved,expression:"!emcOnSchool.isApproved"}],attrs:{color:"yellow","text-color":"black",pill:""}},[e._v(" Не подтверждено ")]),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.EMC.isCustom&&t.EMC.createdBy===e.user.id,expression:"emcOnSchool.EMC.isCustom && emcOnSchool.EMC.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Создано вами ")])],1),r("p",[r("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.EMC.Publisher.publisherName)+" ")]),r("p",[r("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.EMC.authors)+" ")]),r("p",[e._v(" Класс: "+e._s(t.EMC.grades)+" ")]),r("p",[e._v(" ГИА-"+e._s(t.EMC.gia)+" ")]),r("p",[e._v(" Уровень: "+e._s(t.EMC.Level?t.EMC.Level.name:"Нет данных")+" ")])]),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(t){e.isDetailing=!e.isDetailing}}},[e._v(" Комментарии ")]),t.EMC.isCustom&&t.EMC.createdBy===e.user.id?r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"pmo-emc-edit",params:{emcId:t.emcId}}}},[e._v(" Редактировать ")]):e._e(),r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:function(r){return e.$emit("onDetachEMCFrom",t)}}},[e._v(" Открепить УМК ")])],1),r("v-expand-transition",[r("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isDetailing,expression:"isDetailing"}]},[r("v-card-text",{staticClass:"pb-0"},[r("p",[r("strong",[e._v("Причина исползования:")]),e._v(" "+e._s(t.usingCoz))]),r("p",[r("strong",[e._v("Причина изменений:")]),e._v(" "+e._s(t.correctionCoz)+" ")]),r("p",[r("strong",[e._v("Причина смены: ")]),e._v(" "+e._s(t.swapCoz)+" ")])])],1)],1)],1)})),1)},br=[],Cr={data:function(){return{isDetailing:!1}},computed:Object(d["a"])({},Object(o["b"])(["emcsOnSchool","isSignin","user","emcs"]))},fr=Cr,gr=(r("7769"),Object(b["a"])(fr,hr,br,!1,null,"6cc2343f",null)),xr=gr.exports;f()(gr,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VChip:De["a"],VContainer:U["a"],VExpandTransition:Le["a"]});var _r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",{staticClass:"text-h5"},[e._v(" Добавить УМК ")]),r("v-card-text",[r("v-autocomplete",{attrs:{items:e.emcsTitles,"no-data-text":"Нет данных","item-text":"Description","item-value":"emc",dense:"",rounded:"",solo:"","hide-selected":"",label:"УМК",placeholder:"Введите параметр УМК, по которому вы хотите найти нужный","prepend-icon":"mdi-database-search"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),r("v-card-actions",[r("v-btn",{attrs:{disabled:!e.model,color:"teal accent-3"},on:{click:e.attachEMC}},[e._v(" Добавить "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-check ")])],1),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.model,color:"red lighten-1"},on:{click:function(t){e.model=null}}},[e._v(" Закрыть "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-close-circle ")])],1)],1),r("v-divider"),r("v-expand-transition",[e.model?r("v-list",e._l(e.fields,(function(t,a){return r("v-list-item",{key:a},[r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.value)}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(t.key)}})],1)],1)})),1):e._e()],1)],1)},jr=[],Sr={data:function(){return{model:null,descriptionLimit:200,error:null}},watch:{$route:function(){this.model=null,this.getEMCs()}},computed:Object(d["a"])(Object(d["a"])({},Object(o["b"])(["emcs","emcsOnSchool"])),{},{fields:function(){var e=this;return this.model?Object.keys(this.model.previewData).map((function(t){return{key:e.model.previewData[t],value:t}})):[]},emcsTitles:function(){var e=this;return this.emcs.reduce((function(t,r){if(r&&r.Subject.code===e.$route.params.subjectCode&&0===e.emcsOnSchool.filter((function(t){return t.emcId===r.id&&t.School.schoolCode===e.$route.params.schoolCode})).length){var a=r.title.concat(". ")+r.authors.concat(". ")+r.Publisher.name,c=a.length>e.descriptionLimit?a.slice(0,e.descriptionLimit).concat("..."):a,n=[];n.previewData={},n.previewData["Название"]=r.title,n.previewData["Авторы"]=r.authors,n.previewData["Издатель"]=r.Publisher.name,n.previewData["Предмет"]=r.Subject.name,n.previewData["Классы"]=r.grades,n.previewData["Уровень"]=r.gia,n.previewData["Пользовательская"]=r.isCustom?"Да":"Нет",n.entry=r,t.push({Description:c,emc:n})}return t}),[])}}),created:function(){this.getEMCs()},methods:{getEMCs:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ir.getEMCs(e.$route.params);case 3:r=t.sent,e.emcs=Object(n["a"])(r.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},attachEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ir.attachTo(e.$route.params,e.model.entry.id);case 3:r=t.sent,e.emcsOnSchool=Object(n["a"])(r.data.emcsOnSchool),e.model=null,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},wr=Sr,Er=Object(b["a"])(wr,_r,jr,!1,null,null,null),Or=Er.exports;f()(Er,{VAutocomplete:Ne["a"],VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VDivider:$["a"],VExpandTransition:Le["a"],VIcon:V["a"],VList:ze["a"],VListItem:R["a"],VListItemContent:y["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"],VSpacer:j["a"]});var Mr={components:{EMCOnSchoolCard:xr,EMCOnSchoolSelector:Or},data:function(){return{error:null}},computed:Object(d["a"])({},Object(o["b"])(["emcsOnSchool","isSignin","user","emcs"])),created:function(){this.$store.dispatch("setAreasSidebar",!0),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsOnSchool()},watch:{$route:function(){this.getEMCsOnSchool()}},methods:{getEMCs:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("eos get emcs"),t.next=4,ir.getEMCs(e.$route.params);case 4:r=t.sent,console.log("eos new emcs ",r.data.emcs),e.emcs=Object(n["a"])(r.data.emcs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getEMCsOnSchool:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ir.getEMCsOnSchool(e.$route.params);case 3:r=t.sent,console.log("eos school: ",e.$route.params.schoolCode,"; subject: ",e.$route.params.subjectCode,"; eos: ",r.data.emcsOnSchool),e.emcsOnSchool=Object(n["a"])(r.data.emcsOnSchool),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},detachEMCFrom:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("eos detachEMCFrom"),r.next=4,ir.detachFrom(t.$route.params,e.emcId);case 4:a=r.sent,console.log("detachEMCFrom: ",a),t.emcsOnSchool=Object(n["a"])(a.data.emcsOnSchool),t.getEMCs(),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),t.error=r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},kr=Mr,$r=Object(b["a"])(kr,vr,pr,!1,null,"0914629e",null),Vr=$r.exports;f()($r,{VCard:ye["a"],VCol:te["a"],VRow:ae["a"]});var Rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?r("v-container",{staticClass:"px-0",attrs:{fluid:""}},[null==e.emc?r("v-card",[r("v-card-title",{staticClass:"text-h4 text-center"},[e._v(" Подождите...Данные либо грузятся, либо произошла ошибка. "),r("br"),e._v(" Попробуйте перезайти и попробовать снова ")])],1):e._e(),null!=e.emc?r("v-card",[r("v-card-title",{staticClass:"text-h4"},[e._v(" Редактирование УМК ")]),r("v-card-text",{staticClass:"text-h5"},[r("v-text-field",{attrs:{label:"Название"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),r("v-text-field",{attrs:{label:"Авторы",value:e.emc.authors}}),r("v-text-field",{attrs:{label:"Класс"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),r("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}}),r("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),r("v-select",{attrs:{items:e.publishers,"item-text":"name",label:"Издательство","no-data-text":"Нет данных","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.saveEMC}},[e._v(" Сохранить изменения ")]),r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"poo-emcs"}}},[e._v(" Отменить редактирование ")])],1)],1):e._e()],1):e._e()},yr=[],Ar={data:function(){return{loading:!1,error:null,message:null,emc:null}},computed:Object(d["a"])({},Object(o["b"])(["isSignin","subjects","publishers","levels","user"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1),this.getEMCsForEdit()},methods:{getEMCsForEdit:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ir.getEMCs(e.$route.params);case 3:r=t.sent,200===r.status?(a=Object(Ye["a"])(r.data.emcs,1),c=a[0],console.log("response: ",c),e.emc=c):e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this.emc: ",e.emc),t.next=4,ir.setEMC(e.emc);case 4:e.$store.dispatch("updateEMC",e.emc),e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Dr=Ar,Lr=Object(b["a"])(Dr,Rr,yr,!1,null,null,null),Tr=Lr.exports;f()(Lr,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VContainer:U["a"],VSelect:rt["a"],VSpacer:j["a"],VTextField:ce["a"]});var Ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?r("v-container",{staticClass:"px-0",attrs:{fluid:""}},[r("v-card",[r("v-card-title",{staticClass:"text-h4"},[e._v(" Создание УМК ")]),r("v-card-text",{staticClass:"text-h5"},[r("v-text-field",{attrs:{label:"Название",placeholder:"Введите название умк"},model:{value:e.emc.title,callback:function(t){e.$set(e.emc,"title",t)},expression:"emc.title"}}),r("v-text-field",{attrs:{label:"Авторы",placeholder:"Введите автора умк"},model:{value:e.emc.authors,callback:function(t){e.$set(e.emc,"authors",t)},expression:"emc.authors"}}),r("v-text-field",{attrs:{label:"Класс",placeholder:"Введите классы умк"},model:{value:e.emc.grades,callback:function(t){e.$set(e.emc,"grades",t)},expression:"emc.grades"}}),r("v-select",{attrs:{items:e.levels,"item-text":"name","no-data-text":"Нет данных",label:"Уровень",solo:"","return-object":""},model:{value:e.emc.Level,callback:function(t){e.$set(e.emc,"Level",t)},expression:"emc.Level"}}),r("v-select",{attrs:{items:e.publishers,"item-text":"name","no-data-text":"Нет данных",label:"Издательство",placeholder:"Выберите издательство умк",solo:"","return-object":""},model:{value:e.emc.Publisher,callback:function(t){e.$set(e.emc,"Publisher",t)},expression:"emc.Publisher"}}),r("v-select",{attrs:{items:e.subjects,"item-text":"name","no-data-text":"Нет данных",label:"Предмет",placeholder:"Выберите предмет умк",solo:"","return-object":""},model:{value:e.emc.Subject,callback:function(t){e.$set(e.emc,"Subject",t)},expression:"emc.Subject"}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"teal accent-4"},on:{click:e.createEMC}},[e._v(" Создать УМК ")]),r("v-btn",{attrs:{text:"",color:"red accent-2",to:{name:"poo-emcs"}}},[e._v(" Назад ")])],1)],1)],1):e._e()},Pr=[],Fr={data:function(){return{error:null,message:null,emc:{title:null,grades:null,authors:null,levelId:null,Level:null,subjectId:null,Subject:null,publisherId:null,Publisher:null,isCustom:!1}}},computed:Object(d["a"])({},Object(o["b"])(["isSignin","user","publishers","subjects","levels"])),created:function(){this.$store.dispatch("setAreasSidebar",!1),this.$store.dispatch("setSubjectsSidebar",!1)},methods:{createEMC:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("creating emc ",e.emc),e.$store.dispatch("createEMC",e.emc),t.next=5,ir.createEMC(e.emc);case 5:e.$router.push({name:"poo-subject-emcs",params:{subjectCode:e.emc.Subject.code}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Ur=Fr,Br=Object(b["a"])(Ur,Ir,Pr,!1,null,null,null),Nr=Br.exports;f()(Br,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VContainer:U["a"],VSelect:rt["a"],VTextField:ce["a"]});var zr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSignin&&3==e.user.UserRole.code?r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"poo-emc-create"}}},[e._v(" Создать УМК ")])],1),r("v-col",{attrs:{cols:"12"}},[0===e.emcsFilteredForPOO.length?r("v-card",{staticClass:"mx-auto text-center"},[e._v(" Учебников по этому предмету созданных вами нету ")]):e._e()],1),r("v-col",{attrs:{cols:"12"}},e._l(e.emcsFilteredForPOO,(function(t){return r("v-card",{key:t.id},[r("v-card-title",{staticClass:"text-h4"},[e._v(" "+e._s(t.title)+" ")]),r("v-card-text",{staticClass:"text-h5"},[r("div",[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.isCustom&&t.createdBy===e.user.id,expression:"emc.isCustom && emc.createdBy === user.id"}],attrs:{color:"red","text-color":"white",pill:""}},[e._v(" Созданный вами ")])],1),r("p",[r("strong",[e._v(" Издательство: ")]),e._v(" "+e._s(t.Publisher.name)+" ")]),r("p",[r("strong",[e._v(" Авторы: ")]),e._v(" "+e._s(t.authors)+" ")]),r("p",[r("strong",[e._v(" Класс: ")]),e._v(" "+e._s(t.grades)+" ")]),r("p",[r("strong",[e._v(" Уровень: ")]),e._v(" "+e._s(t.Level?t.Level.name:"Нет данных")+" ")]),9==t.gia?r("v-chip",{attrs:{color:"indigo lighten-2","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),11==t.gia?r("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" ГИА-"+e._s(t.gia)+" ")]):e._e(),r("v-chip",{attrs:{color:"light-blue accent-3","text-color":"white",pill:""}},[e._v(" "+e._s(t.Subject.name)+" ")])],1),r("v-card-actions",[t.isCustom&&t.createdBy===e.user.id?r("v-btn",{attrs:{text:"",color:"teal accent-4",to:{name:"poo-emc-edit",params:{emcId:t.id}}}},[e._v(" Редактировать ")]):e._e(),r("v-spacer"),t.isCustom&&t.createdBy===e.user.id?r("v-btn",{attrs:{text:"",color:"red darken-1"},on:{click:function(r){return e.deleteEMC(t)}}},[e._v(" Удалить ")]):e._e()],1)],1)})),1)],1):e._e()},Gr=[],qr={data:function(){return{error:null}},computed:Object(d["a"])(Object(d["a"])({},Object(o["b"])(["isSignin","user","emcs"])),{},{emcsFilteredForPOO:function(){var e=this;return this.emcs.filter((function(t){return t.isCustom&&t.createdBy===e.user.id}))}}),watch:{$route:function(){this.getEMCsForConstructor()}},created:function(){this.$store.dispatch("setSubjectsSidebar",!0),this.$store.dispatch("setAreasSidebar",!1),this.getEMCsForConstructor()},methods:{getEMCsForConstructor:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ir.getEMCs(e.$route.params);case 3:r=t.sent,e.$store.dispatch("setEMCs",r.data.emcs),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteEMC:function(e){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ir.deleteEMC(e);case 3:a=r.sent,200===a.status&&t.$store.dispatch("deleteEMC",e),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.error=r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},Hr=qr,Jr=Object(b["a"])(Hr,zr,Gr,!1,null,null,null),Kr=Jr.exports;f()(Jr,{VBtn:x["a"],VCard:ye["a"],VCardActions:Ae["a"],VCardText:Ae["b"],VCardTitle:Ae["c"],VChip:De["a"],VCol:te["a"],VRow:ae["a"],VSpacer:j["a"]}),a["a"].use(q["a"]);var Qr=function(e,t,r){i.state.isSignin&&1===i.state.user.UserRole.code?r():r("/")},Wr=function(e,t,r){i.state.isSignin&&2===i.state.user.UserRole.code?r():r("/")},Xr=function(e,t,r){i.state.isSignin&&3===i.state.user.UserRole.code?r():r("/")},Yr=new q["a"]({mode:"history",routes:[{path:"/",name:"/",component:me},{path:"/signup",name:"signup",component:se},{path:"/admin",name:"main-admin",component:Ee,beforeEnter:Qr},{name:"admin-emcs-on-school-index",path:"/admin/emcs-on-school",component:Qe,beforeEnter:Qr},{name:"admin-emcs-on-school",path:"/admin/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:Qe,beforeEnter:Qr},{name:"admin-emcs",path:"/admin/emcs",component:bt,beforeEnter:Qr},{name:"admin-subject-emcs",path:"/admin/subjects/:subjectCode/emcs",component:bt,beforeEnter:Qr},{name:"admin-emc-create",path:"/admin/emcs/create",component:ut,beforeEnter:Qr},{name:"admin-emc-edit",path:"/admin/emcs/:emcId/edit",component:ct,beforeEnter:Qr},{path:"/pmo",name:"main-pmo",component:St,beforeEnter:Wr},{name:"pmo-emcs-on-school-index",path:"/pmo/emcs-on-school",component:Bt,beforeEnter:Wr},{name:"pmo-emcs-on-school",path:"/pmo/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:Bt,beforeEnter:Wr},{name:"pmo-emcs",path:"/pmo/emcs",component:nr,beforeEnter:Wr},{name:"pmo-subject-emcs",path:"/pmo/subjects/:subjectCode/emcs",component:nr,beforeEnter:Wr},{name:"pmo-emc-create",path:"/pmo/emcs/create",component:Zt,beforeEnter:Wr},{name:"pmo-emc-edit",path:"/pmo/emcs/:emcId/edit",component:Jt,beforeEnter:Wr},{path:"/poo",name:"main-poo",component:mr,beforeEnter:Xr},{name:"poo-emcs-on-school-index",path:"/poo/emcs-on-school",component:Vr,beforeEnter:Xr},{name:"poo-emcs-on-school",path:"/poo/areas/:areaCode/schools/:schoolCode/subjects/:subjectCode/emcs-on-school",component:Vr,beforeEnter:Xr},{name:"poo-emcs",path:"/poo/emcs",component:Kr,beforeEnter:Xr},{name:"poo-subject-emcs",path:"/poo/subjects/:subjectCode/emcs",component:Kr,beforeEnter:Xr},{name:"poo-emc-create",path:"/poo/emcs/create",component:Nr,beforeEnter:Xr},{name:"poo-emc-edit",path:"/poo/emcs/:emcId/edit",component:Tr,beforeEnter:Xr},{path:"*",component:fe}]}),Zr=r("f309");a["a"].use(Zr["a"]);var ea=new Zr["a"]({});a["a"].config.productionTip=!1,Object(c["sync"])(i,Yr),new a["a"]({store:i,router:Yr,vuetify:ea,render:function(e){return e(G)}}).$mount("#app")},"5c6c7":function(e,t,r){},"636a":function(e,t,r){"use strict";r("6930")},6930:function(e,t,r){},7769:function(e,t,r){"use strict";r("5c6c7")}});
//# sourceMappingURL=app.9a1d5144.js.map